var aqSuning=aqSuning||{};var aqjs=document.getElementsByTagName("script");var aqcss=document.getElementsByTagName("link");var aqIntervalVar,ascUrl,aqRefreshFlag=false;function isInclude(e,f){if(f){for(var d=0;d<aqjs.length;d++){if(aqjs[d][f?"src":"href"].indexOf(e)!=-1){return true}}return false}else{for(var d=0;d<aqcss.length;d++){if(aqcss[d][f?"src":"href"].indexOf(e)!=-1){return true}}return false}}function getCurVersion(){var b=new Date();var a=b.getYear()+"-"+b.getMonth()+"-"+b.getDate()+":"+b.getHours();return a}$(document).ready(function(){var a=document.location.hostname;judgeAsc(a);if(!isInclude("jquery",true)){alert("请引入jQuery.js")}});function judgeAsc(a){var c=window.location.protocol;var d=/^\w*?.suning.com$/;var e=/^(\w*)(pre)(\w*)(.cnsuning.com)$/;var b=/^(\w*)(sit)(\w*)(.cnsuning.com)$/;if(d.test(a)){ascUrl=c+"//aq.suning.com/asc/loginpro/getinfo.do"}else{if(e.test(a)){ascUrl=c+"//aqpre.cnsuning.com/asc/loginpro/getinfo.do"}else{if(b.test(a)){ascUrl=c+"//aqsit.cnsuning.com/asc/loginpro/getinfo.do"}else{ascUrl=c+"//aqsit.cnsuning.com/asc/loginpro/getinfo.do";ascUrl=c+"//aqdev.cnsuning.com:8080/asc-web/loginpro/getinfo.do"}}}}aqSuning.showMobilePopType=function(a,c,d,b){securityLoginProtect(c,d,b);aqRefreshFlag=a};var securityLoginProtect=function(i,e,a){var h=ascUrl+"?ticket="+i+"&targetUrl="+e+"&parentUrl="+a;var k="<div class='mask-layer' ></div>",j='<iframe id="security-loginProtect" frameborder=0 allowTransparency="true" src='+h+' style="overflow: hidden;position:fixed;top:50%;left:50%;margin-top:-150px;margin-left:-200px;width:420px;height:362px;border:none;background: transparent;z-index:9995;_position:absolute;"></iframe>',b="",f="",m="",g="",c="",n="";function l(){b=document.body.clientWidth,f=document.body.clientHeight,m=window.screen.availWidth,g=window.screen.availHeight;if(f>g){c=b;n=f}else{c=m;n=g}}l();$(k).appendTo($("body")).css({position:"absolute",top:0,left:0,width:c,height:n,background:"#000",opacity:0,zIndex:9990}).stop().animate({opacity:0.3});$(j).appendTo($("body")).css({opacity:0}).stop().animate({opacity:1});$(window).resize(function(){l();$(k).css({width:c,height:n})});if((navigator.userAgent.indexOf("MSIE 6.0")>0)){$(window).scroll(function(){l();$(k).css({width:c,height:n});var o=$(window).scrollTop(),d=$(window).height()/2;$("#security-loginProtect").css({top:o+d})})}else{$(window).scroll(function(){l();$(k).css({width:c,height:n})})}aqIntervalVar=window.setInterval(checkMsgFromLoginProtectIframe,200)};function checkMsgFromLoginProtectIframe(){var a=window.location.hash;if(a.length>1){var b=a.split("#");var c=b[1].split(":");switch(c[0]){case"aqclose":securityLoginProtectClose();break;case"success":securityLoginProtectClose();break;default:break}}}var securityLoginProtectClose=function(){var f=$("#security-loginProtect"),g=f.siblings(".mask-layer");f.stop().animate({opacity:0},function(){f.remove()});g.stop().animate({opacity:0},function(){g.remove()});clearInterval(aqIntervalVar);var c=window.location.href;var d=c.indexOf("#");var e=c.substring(0,d)+"#unknown:";window.location.href=e;if(aqRefreshFlag==true){window.location.reload()}};LoginProtect={QueryString:function(b){var a=location.search.match(new RegExp("[?&]"+b+"=([^&]*)(&?)","i"));return a?a[1]:a}};