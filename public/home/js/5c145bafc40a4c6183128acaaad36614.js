var SFELion=SFELion||{};SFELion.dialog=SFELion.dialog||(function(j,d,e,k){if(!jQuery){throw new Error("The plugin requires jQuery")}var g=/MSIE/.test(navigator.userAgent);var a=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var h=true;e.fn.snfadeIn=function(b,m){return this.animate({opacity:"show"},b,function(){if(!!g){this.style.removeAttribute("filter")}if(e.isFunction(m)){m()}})};var c='<div class="m-lion-dialog-overlay"><div class="close lay overlay" ></div><!--[if IE 6]><iframe class="close lay frame"  src="about:blank" frameborder="0" ></iframe><![endif]--></div>';var f='<div class="m-lion-dialog"><i class="lion"></i><div class="container"><div class="title"><h3>温馨提示</h3></div><a href="javascript:;" class="btn close" name="PCverification_identity_close" title="关闭"></a><i class="semi-circle"></i><div class="content"></div></div></div>';var i;function l(s){s.mLionDialog=function(u){if(h){q(u);h=false}};s.unmLionDialog=function(u){o(u);h=true};s.mLionDialog.defaults={css:{width:"450px",position:"fixed",_position:"absolute"},overlayCss:{},title:"温馨提示",message:"",callback:null,http:null,fadeIn:0,fadeOut:0,overlay:true,overlayClick:false,timeout:null,draggable:true,iframeSrc:/^https/i.test(window.location.href||"")?"https://imgssl.suning.com/images/ShoppingArea/Common/blankbg.gif":"about:blank"};var n,t,b,r;function q(u){u=s.extend({},s.mLionDialog.defaults,u||{});if(n){clearTimeout(n)}s("body").append(f).append(c);p(u);m(u);t=u}function o(v){if(!!v){v=s.extend({},s.mLionDialog.defaults,v||{})}else{v=t}var u=typeof v.fadeOut=="number"?v.fadeOut:0;s(".m-lion-dialog").children().fadeOut(0,function(){s(".m-lion-dialog").remove()});s(".m-lion-dialog-overlay").children().fadeOut(u,function(){s(".m-lion-dialog-overlay").remove()});if(b!==k){v.message.html(r)}b=k}function p(w){if(!!w.message&&!w.http){if(typeof w.message=="object"){b=w.message.children().size()?w.message.children():w.message.html();r=w.message.children().size()?b.clone():w.message.html();s(".m-lion-dialog").find(".content").append(b)}else{if(typeof w.message=="string"){s(".m-lion-dialog").find(".content").html(w.message)}}}else{if(!w.message&&!!w.http&&typeof w.http=="function"){w.http(s(".m-lion-dialog"),w)}else{if(!w.message&&!w.http){throw new Error("至少,必须设置其中一个参数");return}}}if(typeof w.css=="object"){s(".m-lion-dialog").css(w.css);if(a){s(".m-lion-dialog").css("position","absolute")}}var y=s(".m-lion-dialog");var B=s(".m-lion-dialog-overlay");var u=s(".m-lion-dialog-overlay .lay");var A=typeof w.fadeIn=="number"?w.fadeIn:0;var z=s.extend({},s.mLionDialog.defaults.css,w.css||{});y.children().snfadeIn(0,function(){if(typeof w.callback=="function"){w.callback(this,w)}});if(typeof w.title=="string"){if(w.title==""){s(".m-lion-dialog .title").html("")}else{s(".m-lion-dialog .title h3").html(w.title)}}function x(){var C=s(".m-lion-dialog").height();var D=s(j).height();var E=s("body").height();if(a){y.css({marginLeft:-y.width()/2,marginTop:(C>D?0:(s(document).scrollTop()-s(".m-lion-dialog").height()/2)),top:(C>D?0:"50%")})}else{y.css(z).css({marginLeft:-y.width()/2,marginTop:(C>D?0:-C/2),top:(C>D?0:"50%")})}u.height(Math.max(E,D))}x();if(a){s(j).scroll(function(){y.css({marginTop:(s(".m-lion-dialog").height()>s(j).height()?s(document).scrollTop():(s(document).scrollTop()-s(".m-lion-dialog").height()/2))})})}s(j).resize(function(){x()});var v=s.extend({},s.mLionDialog.defaults.overlayCss,w.overlayCss||{});if(w.overlay===true){u.css(v).snfadeIn(A)}}function m(v){var w=[".m-lion-dialog .close"];if(typeof v.timeout=="number"){n=setTimeout(function(){s.unmLionDialog()},v.timeout)}if(!!v.overlayClick){w.push(".m-lion-dialog-overlay")}for(var u=0;u<w.length;u++){s(w[u]).click(function(){s.unmLionDialog()})}}}l(jQuery)})(window,document,jQuery);if(typeof define==="function"){define("SFE.dialog.dev",["jquery"],function(c,b,a){a.exports=SFELion.dialog})}else{window.$=window.jQuery=jQuery};String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};function getFormJson(c){var d={};var b=$(c).serializeArray();$.each(b,function(){if(d[this.name]!==undefined){if(!d[this.name].push){d[this.name]=[d[this.name]]}d[this.name].push(this.value||"")}else{d[this.name]=this.value||""}});return d}var srscommon=srscommon||{};srscommon.settings={baseUrl:$("#baseUrl").val()};srscommon.hideMobile=function(a){if(!a){return""}return a.substring(0,3)+"******"+a.substring(9,11)};srscommon.hideEmail=function(b){if(!b){return""}var d=b.indexOf("@");if(d<0){return""}var c=b.substring(0,d);if(c.length==0){return b}if(c.length==1){return"***"+b}var a=b.substring(d,b.length);if(c.length==2){return c.substring(0,1)+"***"+c.substring(1,2)+a}if(c.length>=3){return c.substring(0,2)+"***"+c.substring(c.length-1,c.length)+a}};srscommon.checkPwdSafeLevel=function(b,a){var d=$(b).val();var e=$(a);if(d.length>=6){var c=checkPasswordStrength(d);if("A"==c){e.removeClass().addClass("safe-rank strengthA")}if("B"==c){e.removeClass().addClass("safe-rank strengthB")}if("C"==c){e.removeClass().addClass("safe-rank strengthC")}}else{e.removeClass().addClass("safe-rank")}};srscommon.jumpCountDown=function(c,d){var b=parseInt($(c).text());function a(){if(b!=0){setTimeout(function(){b-=1;$("#countdown").text(b);a()},1000)}else{window.location.href=d;return false}}a()};srscommon.guessRegMode=function(a){var c=/^[1]\d{10}$/;var b=/@/;if(a.length==0||a=="手机号/邮箱"||a=="手机号"){return""}else{if(c.test(a)){return"mobileRegSubMode"}else{if(b.test(a)){return"emailRegSubMode"}else{return"wrongLoginName"}}}};srscommon.checkImgShow=function(b,a){$.ajax({url:srscommon.settings.baseUrl+"/checkimgcodeshow.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{},dataType:"json",success:function(c){if("R0"==c.result){b(c)}else{a(c)}}})};srscommon.checkImgShowAndVoice=function(c,b,e,d){var a;$.ajax({url:"/ajaxIsCheckImageCodeAndVoiceCode.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,dataType:"json",success:function(f){if("R0"==f.result){c(f)}else{b(f)}if("1"==f.voiceCodeEable){e()}else{d()}},error:function(){c(data);d()}});return a};srscommon.fun_getVcode=function(b,a){if(typeof isEnableSiller!="undefined"&&isEnableSiller==true){$(a).val("siller");return}$.ajax({type:"post",url:srscommon.settings.baseUrl+"/getuid.do",contentType:"application/x-www-form-urlencoded;charset=UTF-8",dataType:"json",async:false,success:function(d){var c=d.uuid;$(b).attr("src","https://vcs.suning.com/vcs/imageCode.htm?uuid="+c);$(a).val(c)}})};srscommon.bindKeypressCapsLock=function(b,c,a){document.getElementById(b).onkeypress=function(h){var j=h||window.event;var i=j.keyCode||j.which;var f=j.target||j.srcElement;var g=f.id;var d=j.shiftKey||(i==16)||false;if(((i>=65&&i<=90)&&!d)||((i>=97&&i<=122)&&d)){c()}else{a()}}};srscommon.ajaxRegchannel=function(a){$.ajax({url:srscommon.settings.baseUrl+"/getregchannel.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{},dataType:"json",success:function(b){a(b.regChannel)}})};srscommon.initCitySelect=function(b,a){if($(b).size()>0){$(b).mCity({used:true,getCity:function(f){var d=f.province.id;var e=f.city.lesId;var c=f.district.lesId;a(d,e,c)},distCb:function(f){var d=f.province.id;var e=f.city.lesId;var c=f.district.lesId;a(d,e,c)},changeCb:function(f){var d=f.province.id;var e=f.city.lesId;var c=f.district.lesId;a(d,e,c)}})}};srscommon.bindSmsSendButton=function(n){var e=$.extend({sendButtonId:".getmscode",eventype:"click",sendButtonDisableClass:"gray1",sendButtonEnableClass:"blue1",secondNum:60,vaildateDataFun:function(){return true},getSendAjaxDataFun:function(){return{}},sendCodeCallback:function(o,p,r,q){},secCountCallback:function(o){},imgCodeShowCallback:function(o){}},n);var b=e.sendButtonId;var a=e.eventype;var j=e.sendButtonDisableClass;var f=e.sendButtonEnableClass;var d=e.secondNum;var k=e.getSendAjaxDataFun;var c=e.sendCodeCallback;var m=e.vaildateDataFun;var l=e.secCountCallback;var h=e.imgCodeShowCallback;$(b).on(a,function(){if($(this).hasClass(j)){return}if(!m()){return}$(this).removeClass(f);$(this).addClass(j);$(this).html('<span>重新获取<i class="count">'+d+"</i>s</span>");timer=setInterval(i,1000);g()});function i(){var o=$(b).find(".count");count=o.html();$doc=$(b);if(count>0){o.html(count-1)}else{window.clearInterval(timer);$doc.html('<span><i class="count"></i>重新获取验证码</span>');$doc.removeClass(j);$doc.addClass(f)}l(count)}function g(){$.ajax({url:"/ajax/code/sms.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:k(),dataType:"json",async:false,success:function(o){if(o.isNeedImageCode=="true"){h(o.isNeedImageCode)}if("R0000"==o.returnCode){if(o.lessTimes>0){c("R0000","手机验证码已经成功发送，请注意查收，您还有"+o.lessTimes+"次获取机会",o.seqNum,o.lessTimes)}else{if(0==o.lessTimes){c("R0000","手机验证码已经成功发送，请注意查收",o.seqNum,o.lessTimes)}}}else{if("R0001"==o.returnCode){c("R0001","您的操作已失效，请刷新页面后操作！",o.seqNum,o.lessTimes)}else{if(null!=o&&""!=o.returnMsg){c(o.returnCode,o.returnMsg,o.seqNum,o.lessTimes)}else{c("","短信验证码发送失败",-1,-1)}}}},error:function(){c("","您的网络不给力，请稍候再试",-1,-1)}})}};srscommon.bindEmailSendButton=function(m){var e=$.extend({sendButtonId:".getmscode",eventype:"click",sendButtonDisableClass:"gray1",sendButtonEnableClass:"blue1",secondNum:60,vaildateDataFun:function(){return true},getSendAjaxDataFun:function(){return{}},sendCodeCallback:function(n,o,q,p){},secCountCallback:function(n){}},m);var b=e.sendButtonId;var a=e.eventype;var i=e.sendButtonDisableClass;var f=e.sendButtonEnableClass;var d=e.secondNum;var j=e.getSendAjaxDataFun;var c=e.sendCodeCallback;var l=e.vaildateDataFun;var k=e.secCountCallback;$(b).on(a,function(){if($(this).hasClass(i)){return}if(!l()){return}$(this).removeClass(f);$(this).addClass(i);$(this).html('<span>重新获取<i class="count">'+d+"</i>s</span>");timer=setInterval(h,1000);g()});function h(){var n=$(b).find(".count");count=n.html();$doc=$(b);if(count>0){n.html(count-1)}else{window.clearInterval(timer);$doc.html('<span><i class="count"></i>重新获取验证码</span>');$doc.removeClass(i);$doc.addClass(f)}k(count)}function g(){$.ajax({url:"/ajax/code/email.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:j(),dataType:"json",async:false,success:function(n){if("R0000"==n.returnCode){if(""!=n.domainLink){c("R0000","邮箱验证码第"+n.seqNum+'次成功发送， 请<a name="" href="'+n.domainLink+'" target="_blank" class="emailTipDomainLink">登录邮箱</a>查收，24小时内有效',n)}else{c("R0000","邮箱验证码第"+n.seqNum+"次成功发送， 请登录邮箱查收，24小时内有效",n)}}else{if("R0001"==n.returnCode){c("R0001","您的操作已失效，请刷新页面后操作！",n)}else{if(null!=n&&""!=n.returnMsg){c(n.returnCode,n.returnMsg,n)}else{c("","邮箱验证码发送失败",null)}}}},error:function(){c("","您的网络不给力，请稍候再试",null)}})}};srscommon.bindYuyiSendButton=function(k){var d=$.extend({sendButtonId:".yuyin",eventype:"click",sendButtonDisableClass:"gray1",sendButtonEnableClass:"org1",vaildateDataFun:function(){return true},getSendAjaxDataFun:function(){return{}},sendCodeCallback:function(l,m,o,n){},imgCodeShowCallback:function(l){}},k);var b=d.sendButtonId;var a=d.eventype;var h=d.sendButtonDisableClass;var e=d.sendButtonEnableClass;var j=d.vaildateDataFun;var i=d.getSendAjaxDataFun;var c=d.sendCodeCallback;var g=d.imgCodeShowCallback;$(b).on(a,function(){if($(this).hasClass(h)){return}if(!j()){return}$(this).removeClass(e);$(this).addClass(h);f()});function f(){$.ajax({url:"/ajax/code/yy.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:i(),dataType:"json",async:false,success:function(l){if(l.isNeedImageCode=="true"){g(l.isNeedImageCode)}if("R0000"==l.returnCode){c("R0000","稍后将有苏宁的电话拨打给您，告知验证码内容，请耐心等待~",l.seqNum,l.lessTimes)}else{if("R0001"==l.returnCode){c("R0001","您的操作已失效，请刷新页面后操作！",l.seqNum,l.lessTimes)}else{if(null!=l&&""!=l.returnMsg){c(l.returnCode,l.returnMsg,l.seqNum,l.lessTimes)}else{c("","语音验证码发送失败",-1,-1)}}}},error:function(){c("__error","语音验证码发送失败",-1,-1)}})}};srscommon.wapGohome=function(){location.href="http://m.suning.com?adTypeCode=1001"};srscommon.wapGoReg=function(c,b){var a=navigator.userAgent.toLowerCase();if(a.match(/MicroMessenger/i)=="micromessenger"){location.href="/wap/person.do?aliasName="+c;return}else{if(a.indexOf("snebuy-app")>0&&a.match(/(iphone|ipod|ipad);?/i)){window.SNNativeClient.routeToClientPage("1053","");b();return}else{if(a.indexOf("snebuy-app")>0&&a.match(/android/i)){if(!b){b=function(){}}location.href="http://m.suning.com?adTypeCode=1053";b();return}else{location.href="/wap/person.do?aliasName="+c;return}}}};srscommon.eppLogin=function(){var b="https://passport.suning.com/ids";b=b.replace("://","%3A%2F%2F").replace("/","%2F");var c="https://paypassport.suning.com";var a=c+"/ids/oauth20/authorize?client_id=suning_01&response_type=code&redirect_uri="+b+"%2Flogin%3Foauth_provider%3DEppProvider";var d=$("#myTargetUrl").val();if(null==d||""==d){window.location.href=a}else{window.location.href=a+"&state="+encodeURIComponent(d)}};srscommon.goCompanyReg=function(b,a){if(null==b||""==b){if(null==a||""==a){window.location.href=$("#baseUrl").val()+"/company.do"}else{window.location.href=$("#baseUrl").val()+"/company.do?custSource="+a}}else{if(null==a||""==a){window.location.href=$("#baseUrl").val()+"/company.do?targetUrl="+b}else{window.location.href=$("#baseUrl").val()+"/company.do?targetUrl="+b+"&custSource="+a}}};srscommon.goPersonReg=function(b,a){if(null==b||""==b){if(null==a||""==a){window.location.href=$("#baseUrl").val()+"/person.do"}else{window.location.href=$("#baseUrl").val()+"/person.do?custSource="+a}}else{if(null==a||""==a){window.location.href=$("#baseUrl").val()+"/person.do?myTargetUrl="+b}else{window.location.href=$("#baseUrl").val()+"/person.do?myTargetUrl="+b+"&custSource="+a}}};var srsval=srsval||{};srsval.highlight;srsval.unhighlight;srsval.settings={};srsval.init=function(a){srsval.settings=$.extend({baseUrl:$("#baseUrl").val(),commerceServer:"https://ssl.suning.com",eppLoginFunName:"eppLogin",logonUrlFunName:"logonUrl",grapGoOnFunName:"grapGoOn",coverPoint_partyName_E003_checkReg:"",coverPoint_emailAlias_exist_login:"",coverPoint_emailAliasEPP_E001_EPPAlaisExit_unionLogin:"",coverPoint_emailAliasEPP_exist_login:"",coverPoint_mobileAliasEPP_E001_EPPAlaisExit_unionLogin:"",coverPoint_mobileAliasEPP_cmf_online_login:"",coverPoint_mobileAliasEPP_R0_cmf_offline_cardLogin:"",coverPoint_mobileAliasEPP_cmf_cangrap_login:"",coverPoint_mobileAliasEPP_cmf_cangrap_Reg:"",coverPoint_mobileAliasEPP_exist_login:"",errorMessage_mobileAliasEPP_empty:"",errorMessage_emailAliasEPP_EPPAlaisExit:"",errorMessage_emailAliasEPP_exist:"",errorMessage_emailAlias_exist:""},a);srsval.highlight=a.highlight;srsval.unhighlight=a.unhighlight};srsval.valid=function(d){var g=d.validObjs;var c=d.model||"order";var b=true;for(var e=0;e<g.length;e++){var f=g[e];var a=srsval.methods[f.methodName](f);if(a==false){b=false;if(c=="order"){break}}}return b};srsval.cache={_map:new Array(),put:function(a,b,c){srsval.cache._map[a+"_"+b]=c},get:function(a,b){return srsval.cache._map[a+"_"+b]},remove:function(a,b){srsval.cache._map[a+"_"+b]=null}};srsval.methods={partyName:function(g){var a=g.elementId;var c=g.messageId;var d=g.isAjaxCheck==null?true:g.isAjaxCheck;var h=$(a).val();if(h.length==0){srsval.highlight(g,h,"__empty","请输入营业执照上的公司名称");return false}partyNameTrim=h.Trim();if(partyNameTrim.length==0){srsval.highlight(g,h,"__all_blank","请输入营业执照上的公司名称");return false}if(h.length<1){srsval.highlight(g,h,"__too_short","公司名称长度只能在1-60个字符之间。");return false}if(h.length>60){srsval.highlight(g,h,"__too_long","公司名称长度只能在1-60个字符之间。");return false}var f=/^[\u4e00-\u9fa5a-zA-Z0-9()（）·\#\-\《\》\_]*$/;if(!f.test(h)){srsval.highlight(g,h,"_special_character","公司名称只能由中文、英文、数字、空格及（）、()、· 、#、-、《》、_组成。");return false}function e(){var i;$.ajax({url:srsval.settings.baseurl+"/ajaxcheckpartyName.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{partyName:h},dataType:"json",success:function(k){if("R0"==k.result){var j=k.code;if("E001"==j){i={result:false,code:"E001",msg:"该公司名称已存在且已进行身份认证，请确认是否贵司人员注册"};return}if("E002"==j){i={result:false,code:"E002",msg:"该公司名称已存在，如非贵司注册，请联系4008516516进行申诉"};return}if("E003"==j){i={result:false,code:"E003",msg:"该公司名称在线下公司卡中已存在，您可以直接进行<a href='"+srsval.settings.baseurl+"/companycardshow.do' name='"+srsval.settings.coverPoint_partyName_E003_checkReg+"'>验证注册</a>"};return}if("E004"==j){i={result:false,code:"E004",msg:"该公司名称在线下已存在，请上传您的注册邮箱、联系手机、单位名称、单位所在地、营业执照副本至b2b@cnsuning.com来完成验证注册"};return}if("E005"==j){i={result:false,code:"E005",msg:"该公司名称在线下已存在，请上传您的注册邮箱、联系手机、单位名称、单位所在地、营业执照副本至b2b@cnsuning.com来完成验证注册"};return}if("EI9999"==j){i={result:false,code:"EI9999",msg:k.msg};return}if("E0000001"==j){i={result:false,code:"E0000001",msg:"您的网络不给力哦，请稍后再试！"};return}}else{i={result:true,code:"__success",msg:""};return}}});return i}if(d){var b=e();if(!b.result){srsval.highlight(g,h,b.code,b.msg);return false}else{srsval.unhighlight(g,h,b.code,b.msg);return true}}srsval.unhighlight(g,h,"__success","");return true},emailAliasEPP:function(o){var h=o.elementId;var k=o.messageId;var c=o.isAjaxCheck==null?true:o.isAjaxCheck;var l=$(h).val();var e=$("#random").val();var p=o.eppGoOnEmail;var b=o.isEnableCache==null?false:o.isEnableCache;var f=o.imgCodeValidObj;var n="";var i="";if(f){n=$(f.elementId).val();i=$(f.uidId).val()}var d=null;if(typeof(o.imgCodeShowFun)!="undefined"){d=o.imgCodeShowFun}var j=/^[\w-]+[-.\w]*@[-\w]+\.[-.\w]*[\w-]+$/;if(l.length==0){srsval.highlight(o,l,"__empty","请输入注册邮箱！");return false}if(l.length>50){srsval.highlight(o,l,"__too_long","邮箱格式不正确，请重新输入！");return false}if(!j.test(l)){srsval.highlight(o,l,"__format","邮箱格式不正确，请重新输入！");return false}function g(){var q=false;$.ajax({url:srsval.settings.baseurl+"/ajaxCheckAliasEPP.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{aliasName:l,uid:i,code:n,random:e},dataType:"json",success:function(r){if(typeof(r.imgCodeShow)!="undefined"&&"true"==r.imgCodeShow&&$(f.uidId).val()==""){d&&d()}if(r.random!=null&&r.random!=""&&r.random!=undefined){$("#random").val(r.random)}if("R1"==r.result){q={result:true,code:"__success",msg:""};return}if("EI9999"==r.code){q={result:false,code:"EI9999",msg:"您的网络不给力，请稍后再试。"};return}if(null!=r.msg&&""!=r.msg){q={result:false,code:r.code,msg:r.msg};return}q={result:false,code:r.code,msg:(srsval.settings.errorMessage_emailAliasEPP_exist!=""?srsval.settings.errorMessage_emailAliasEPP_exist:'该邮箱已存在，请重新输入或使用该邮箱直接<a name="'+srsval.settings.coverPoint_emailAliasEPP_exist_login+'" href="javascript:'+srsval.settings.logonUrlFunName+"('','','"+l+"');\">登录</a>")};return}});return q}if(c){var m=null;if(b){var a=l+"_"+i+"_"+n;m=srsval.cache.get("emailAliasEPP",a);if(!m){m=g()}srsval.cache.put("emailAliasEPP",a,m)}else{m=g()}if(f!=null&&(m.code=="imgCodeEmpty"||m.code=="imgCodeError")){return srsval.methods.imgCode(f)}if(!m.result){srsval.highlight(o,l,m.code,m.msg);return false}else{srsval.unhighlight(o,l,m.code,m.msg);return true}}srsval.unhighlight(o,l,"__success","");return true},mobileAliasEPP:function(h){var j=h.elementId;var f=h.messageId;var d=$(j).val();var a=$("#random").val();var l=h.isAjaxCheck==null?true:h.isAjaxCheck;var r=h.onlineGoOnMobile;var i=h.grapGoOnMobile;var m=h.offlineGoOnMobile;var s=h.eppGoOnMobile;var n=h.isEnableCache==null?false:h.isEnableCache;var k=h.imgCodeValidObj;var q="";var g="";if(k){q=$(k.elementId).val();g=$(k.uidId).val()}var e=null;if(typeof(h.imgCodeShowFun)!="undefined"){e=h.imgCodeShowFun}if(d.length==0){srsval.highlight(h,d,"__empty",(srsval.settings.errorMessage_mobileAliasEPP_empty!=""?srsval.settings.errorMessage_mobileAliasEPP_empty:"请输入注册手机！"));return false}var p=/^[1]\d{10}$/;if(!p.test(d)){srsval.highlight(h,d,"__format","格式不正确，请您输入正确的手机号。");return false}function b(){var t=false;$.ajax({url:srsval.settings.baseurl+"/ajaxCheckAliasEPP.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{aliasName:d,uid:g,code:q,random:a},dataType:"json",success:function(u){if(typeof(u.imgCodeShow)!="undefined"&&"true"==u.imgCodeShow&&$(k.uidId).val()==""){e&&e()}if(u.random!=null&&u.random!=""&&u.random!=undefined){$("#random").val(u.random)}if("R1"==u.result){if("cmf_offline"==u.code){if(m==d){t={result:true,code:"cmf_offline",msg:"该手机在门店会员卡中已存在，您可以继续注册易购账号，注册完成后，易购账号将会与门店会员卡进行关联通用。"};return}t={result:false,code:"cmf_offline",msg:"该手机在门店会员卡中已存在，您可以继续注册易购账号，注册完成后，易购账号将会与门店会员卡进行关联通用。"};return}t={result:true,code:"__success",msg:"注册完成后，您可以使用手机号码登录苏宁易购。"};return}if("E001_EPPAlaisExit"==u.code){if(s==d){t={result:true,code:"E001_EPPAlaisExit",msg:"该手机在易付宝已存在，您可以选择继续注册，或用此易付宝账号<a href='javascript:void(0);' onclick='"+srsval.settings.eppLoginFunName+"();return false;' name='"+srsval.settings.coverPoint_mobileAliasEPP_E001_EPPAlaisExit_unionLogin+"'>联合登录</a>。"};return}t={result:false,code:"E001_EPPAlaisExit",msg:"该手机在易付宝已存在，您可以选择继续注册，或用此易付宝账号<a href='javascript:void(0);' onclick='"+srsval.settings.eppLoginFunName+"();return false;' name='"+srsval.settings.coverPoint_mobileAliasEPP_E001_EPPAlaisExit_unionLogin+"'>联合登录</a>。"};return}if("EI9999"==u.code){t={result:false,code:"EI9999",msg:"您的网络不给力，请稍后再试。"};return}else{if("cmf_online"==u.code){if(r==d){t={result:true,code:"cmf_online",msg:"该手机号已经注册易购账号，请更换手机，或者继续通过邮箱注册。"};return}t={result:false,code:"cmf_online",msg:'该手机号已存在，您可以使用此手机号直接<a name="'+srsval.settings.coverPoint_mobileAliasEPP_cmf_online_login+'" href="javascript:'+srsval.settings.logonUrlFunName+"('','','"+d+"');\">登录</a>"};return}else{if("cmf_offline"==u.code){var v=srsval.settings.commerceServer;t={result:false,code:"R0_cmf_offline",msg:"该手机在门店会员卡中已存在，您可以直接进行<a href='"+v+"/emall/SNOffLineMemberMergeCheckCmd?storeId=10052&catalogId=10051&checkType=phone&phone="+d+"' target='_blank' "+srsval.settings.coverPoint_mobileAliasEPP_R0_cmf_offline_cardLogin+">会员卡登录</a>。"};return}else{if("cmf_cangrap"==u.code){if(i==d){t={result:true,code:"cmf_cangrap",msg:"该手机号已经注册易购账号，请直接登录，若继续注册原账号将无法找回。"};return}t={result:false,code:"cmf_cangrap",msg:'该手机号已经注册易购账号，请<a name="'+srsval.settings.coverPoint_mobileAliasEPP_cmf_cangrap_login+'" href="javascript:'+srsval.settings.logonUrlFunName+"('','','"+d+'\');">直接登录</a>，若<a name="'+srsval.settings.coverPoint_mobileAliasEPP_cmf_cangrap_Reg+'" href="javascript:'+srsval.settings.grapGoOnFunName+"('"+d+"');\">继续注册</a>原账号将无法找回。"};return}}}}if(null!=u.msg&&""!=u.msg){t={result:false,code:u.code,msg:u.msg};return}t={result:false,code:u.code,msg:'该手机号已存在，您可以使用此手机号直接<a name="'+srsval.settings.coverPoint_mobileAliasEPP_exist_login+'" href="javascript:'+srsval.settings.logonUrlFunName+"('','','"+d+"');\">登录</a>"};return}});return t}if(l){var o=null;if(n){var c=d+"_"+g+"_"+q;o=srsval.cache.get("mobileAliasEPP",c);if(!o){o=b()}else{if("cmf_cangrap"==o.code){if(i==d){o={result:true,code:"cmf_cangrap",msg:"该手机号已经注册易购账号，请直接登录，若继续注册原账号将无法找回。"}}}}srsval.cache.put("mobileAliasEPP",c,o)}else{o=b()}if(k!=null&&(o.code=="imgCodeEmpty"||o.code=="imgCodeError")){return srsval.methods.imgCode(k)}if(!o.result){srsval.highlight(h,d,o.code,o.msg);return false}else{srsval.unhighlight(h,d,o.code,o.msg);return true}}srsval.unhighlight(h,d,"__success","");return true},cntctMobileNum:function(e){var a=e.elementId;var b=e.messageId;var c=$(a).val();if(c.length==0){srsval.highlight(e,c,"__empty","请输入联系手机！");return false}var d=/^[1]\d{10}$/;if(c.length>0&&!d.test(c)){if(!d.test(c)){srsval.highlight(e,c,"__format","手机号码格式不正确，请重新输入！");return false}}srsval.unhighlight(e,c,"__success","");return true},imgCode:function(j){var e=j.elementId;var g=j.messageId;var b=j.isEnableCache==null?false:j.isEnableCache;var c=j.isAjaxCheck==null?true:j.isAjaxCheck;var i=$(e).val();var f=$(j.uidId).val();if(f.length==0){srsval.unhighlight(j,i,"__success","");return true}if(f=="siller"){if(i.length==0){srsval.highlight(j,i,"__empty","请按住滑块拖到最右边");return false}if(i.length>0){srsval.unhighlight(j,i,"__success","");return true}}if(i.length==0){srsval.highlight(j,i,"__empty","请输入验证码！");return false}if(i.length<4){srsval.highlight(j,i,"__too_short","验证码不正确，请重新输入！");return false}if(i.length>4){srsval.highlight(j,i,"__too_long","验证码不正确，请重新输入！");return false}function d(){var k;$.ajax({url:srsval.settings.baseurl+"/ajaxcheckimg.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{code:i,uid:f},dataType:"json",success:function(l){if("R0"==l.result){k={result:true,code:"__success",msg:""};return}else{k={result:false,code:l.result,msg:"验证码不正确，请重新输入！"};return}}});return k}if(c){var h=null;if(b){var a=f+"_"+i;h=srsval.cache.get("imgCode",a);if(!h){h=d()}srsval.cache.put("imgCode",a,h)}else{h=d()}if(!h.result){srsval.highlight(j,i,h.code,h.msg);return false}else{srsval.unhighlight(j,i,h.code,h.msg);return true}}srsval.unhighlight(j,i,"__success","");return true},smsCode:function(h){var c=h.elementId;var f=h.messageId;var a=h.isAjaxCheck==null?true:h.isAjaxCheck;var j=$(c).val();var i=$(h.phoneNumId).val();var d=h.scen;if(j.length==0){srsval.highlight(h,j,"__empty","请输入短信验证码。");return false}if(j.length!=6){srsval.highlight(h,j,"__length","请输入6位数字验证码。");return false}var e=/^\d{6}$/;if(!e.test(j)){srsval.highlight(h,j,"__format","请输入6位数字验证码。");return false}function b(){var k;$.ajax({url:srsval.settings.baseurl+"/ajax/code/valcode.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{scen:d,code:j,phoneNum:i},dataType:"json",success:function(l){if("R0000"==l.returnCode){k={result:true,code:"__success",msg:""};return}if(null!=l&&""!=l.returnMsg){if("1101"==l.returnCode){k={result:false,code:"1101",msg:"短信验证码错误或已失效，请重新输入。"};return}else{if("1103"==l.returnCode){k={result:false,code:"1103",msg:"短信验证码错误或已失效，请重新输入。"};return}}k={result:false,code:l.returnCode,msg:l.returnMsg};return}k={result:false,code:"",msg:"短信验证码错误或已失效，请重新输入！"};return}});return k}if(a){var g=b();if(!g.result){srsval.highlight(h,j,g.code,g.msg);return false}else{srsval.unhighlight(h,j,g.code,g.msg);return true}}srsval.unhighlight(h,j,"__success","");return true},emailCode:function(h){var b=h.elementId;var e=h.messageId;var a=h.isAjaxCheck==null?true:h.isAjaxCheck;var j=$(b).val();var f=$(h.emailId).val();var c=h.scen;if(j.length==0){srsval.highlight(h,j,"__empty","请输入邮箱验证码。");return false}if(j.length!=6){srsval.highlight(h,j,"__length","请输入6位数字验证码。");return false}var d=/^\d{6}$/;if(!d.test(j)){srsval.highlight(h,j,"__format","请输入6位数字验证码。");return false}function i(){var k;$.ajax({url:srsval.settings.baseurl+"/ajax/code/valemcode.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{scen:c,code:j,email:f},dataType:"json",success:function(l){if("R0000"==l.returnCode){k={result:true,code:"__success",msg:""};return}if(null!=l&&""!=l.returnMsg){if("1101"==l.returnCode){k={result:false,code:"1101",msg:"邮箱验证码错误，请重新输入。"};return}else{if("1103"==l.returnCode){k={result:false,code:"1103",msg:"验证码已失效，请重新获取。"};return}}k={result:false,code:l.returnCode,msg:l.returnMsg};return}k={result:false,code:"",msg:"邮箱验证码错误或已失效，请重新输入！"};return}});return k}if(a){var g=i();if(!g.result){srsval.highlight(h,j,g.code,g.msg);return false}else{srsval.unhighlight(h,j,g.code,g.msg);return true}}srsval.unhighlight(h,j,"__success","");return true},setPsw:function(e){var b=e.elementId;var c=e.messageId;var d=$(b).val();if(isEmptyPassword(d)){srsval.highlight(e,d,"__empty","请输入6-20位密码！");return false}var a=checkPassword(d);if(!a.success){srsval.highlight(e,d,"__check",a.msg);return false}srsval.unhighlight(e,d,"__success","");return true},confirmPsw:function(d){var a=d.elementId;var b=d.messageId;var e=$(a).val();var c=$(d.setPswId).val();if(isEmptyPassword(e)){srsval.highlight(d,e,"__empty","确认密码不能为空！");return false}if(c!=e){srsval.highlight(d,e,"__confirm","您两次输入的密码不一致，请重新输入！");return false}srsval.unhighlight(d,e,"__success","");return true},areaCode:function(f){var c=f.elementId;var d=f.messageId;var b=$(f.provCodeId).val();var e=$(f.cityCodeId).val();var a=$(f.areaCodeId).val();if(b.length<=0){srsval.highlight(f,a,"__prov_empty","请选择单位所在地！");return false}if(e.length<=0){srsval.highlight(f,a,"__city_empty","请选择单位所在地！");return false}if(a.length<=0){srsval.highlight(f,a,"__area_empty","请选择单位所在地！");return false}srsval.unhighlight(f,a,"__success","");return true},cntctPointName:function(e){var a=e.elementId;var b=e.messageId;var d=$(a).val();if(d.length==0){srsval.highlight(e,d,"__empty","请输入联系人姓名！");return false}if(d.length<2){srsval.highlight(e,d,"__too_short","联系人姓名长度只能为2-32个字符。");return false}if(d.length>32){srsval.highlight(e,d,"__too_long","联系人姓名长度只能为2-32个字符。");return false}var c=/^[\u4e00-\u9fa5a-zA-Z]*$/;if(!c.test(d)){srsval.highlight(e,d,"__format","联系人姓名只能由中文或英文组成。");return false}srsval.unhighlight(e,d,"__success","");return true},tele:function(g){var d=g.elementId;var e=g.messageId;var c=$(g.teleAreaCdeId).val();var f=$(g.teleNumId).val();var b=$(g.teleExtnId).val();if(c.length<=0){srsval.highlight(g,g.teleAreaCdeId,"__areacode_empty","请输入固定电话区号");return false}var a=/^\d{3,4}$/;if(!a.test(c)){srsval.highlight(g,g.teleAreaCdeId,"__areacode_format","区号必须为3-4位纯数字！");return false}if(f.length<=0){srsval.highlight(g,g.teleNumId,"__telenum_empty","请输入固定电话座机号");return false}var i=/^\d{7,12}$/;if(!i.test(f)){srsval.highlight(g,g.teleNumId,"__telenum_format","座机号必须为7-12位纯数字！");return false}var h=/^\d{0,6}$/;if(!h.test(b)){srsval.highlight(g,g.teleExtnId,"__teleextn_format","分机号必须为0-6位纯数字！");return false}srsval.unhighlight(g,g.teleAreaCdeId+","+g.teleNumId+","+g.teleExtnId,"__success","");return true},protocol:function(d){var a=d.elementId;var c=d.messageId;var b=$(a).attr("checked");if(!b){srsval.highlight(d,b,"__unchecked","您必须同意苏宁服务条款后，才能提交注册");return false}srsval.unhighlight(d,b,"__success","");return true},cardPassword:function(e){var b=e.elementId;var c=e.messageId;var a=$(b).val();if(a==null||a.length==0){srsval.highlight(e,a,"__empty","请输入会员卡密码");return false}var d=/^\d{6}$/;if(!d.test(a)){srsval.highlight(e,a,"__check","请输入6位数字密码");return false}srsval.unhighlight(e,a,"__success","");return true},mobileNumber:function(d){var a=d.elementId;var b=d.messageId;var e=$(a).val();var c=/^[1]\d{10}$/;if(null==e||e.length==0){srsval.highlight(d,e,"__empty","请输入您预留的手机号");return false}if(!c.test(e)){srsval.highlight(d,e,"__check","请输入正确的手机号码");return false}srsval.unhighlight(d,e,"__success","");return true},customerName:function(e){var b=e.elementId;var c=e.messageId;var a=$(b).val();var d=/(^[\u4E00-\u9FA5]{2,30}$)|(^[a-zA-Z]{2,30}$)/;if(a==null||a.length==0){srsval.highlight(e,a,"__empty","请输入您的姓名");return false}if(!d.test(a)){srsval.highlight(e,a,"__check","您输入的姓名不符合规则");return false}srsval.unhighlight(e,a,"__success","");return true},cardNumber:function(e){var a=e.elementId;var b=e.messageId;var c=$(a).val();var d=/^\d{12}$/;if(c==null||c.length==0){srsval.highlight(e,c,"__empty","请输入您的门店会员卡号");return false}if(!d.test(c)){srsval.highlight(e,c,"__check","您输入的会员卡号不符合规则");return false}srsval.unhighlight(e,c,"__success","");return true},loginAlias:function(d){var b=d.elementId;var c=d.messageId;var a=$(b).val();if(a==null||a.length==0){srsval.highlight(d,a,"__empty","请输入用户名/邮箱/手机号！");return false}srsval.unhighlight(d,a,"__success","");return true},loginPsw:function(d){var b=d.elementId;var c=d.messageId;var a=$(b).val();if(a==null||a.length==0){srsval.highlight(d,a,"__empty","请输入6-20位密码！");return false}srsval.unhighlight(d,a,"__success","");return true},tradeType:function(d){var b=d.elementId;var c=d.messageId;var a=$(b).val();if(a==null||a.length==0){srsval.highlight(d,a,"__empty","请选择公司行业！");return false}srsval.unhighlight(d,a,"__success","");return true},recommendNo:function(f){var b=f.elementId;var c=f.messageId;var e=/^\d{8}$/;var d=/^\d{11}$/;var a=$(b).val();if(a.length==0){return true}if(e.test(a)||d.test(a)){srsval.unhighlight(f,a,"__success","");return true}else{srsval.highlight(f,a,"__check","推荐号为8位工号或11位手机号，请核对后重新输入");return false}},realName:function(e){var a=e.elementId;var c=e.messageId;var b=$(a).val();if(b.length==0){srsval.highlight(e,b,"__empty","请输入姓名！");return false}if(b.length<2){srsval.highlight(e,b,"__too_short","联系人姓名长度只能为2-32个字符。");return false}if(b.length>32){srsval.highlight(e,b,"__too_long","联系人姓名长度只能为2-32个字符。");return false}var d=/^[\u4e00-\u9fa5a-zA-Z]*$/;if(!d.test(b)){srsval.highlight(e,b,"__format","联系人姓名只能由中文或英文组成。");return false}srsval.unhighlight(e,b,"__success","");return true},idCard:function(e){var b=e.elementId;var c=e.messageId;var a=$(b).val();if(a.length==0){srsval.highlight(e,a,"__empty","请输入身份证！");return false}var d=/^[a-zA-Z0-9]{15,18}$/;if(!d.test(a)){srsval.highlight(e,a,"__format","请输入正确的身份证。");return false}srsval.unhighlight(e,a,"__success","");return true},emailAliasEPPGrap:function(l){var e=l.elementId;var h=l.messageId;var b=l.isAjaxCheck==null?true:l.isAjaxCheck;var i=$(e).val();var c=$("#random").val();var m=l.eppGoOnEmail;var a=l.isEnableCache==null?false:l.isEnableCache;var g=/^[\w-]+[-.\w]*@[-\w]+\.[-.\w]*[\w-]+$/;if(i.length==0){srsval.highlight(l,i,"__empty","请输入注册邮箱！");return false}if(i.length>50){srsval.highlight(l,i,"__too_long","邮箱格式不正确，请重新输入！");return false}if(!g.test(i)){srsval.highlight(l,i,"__format","邮箱格式不正确，请重新输入！");return false}var k=$("#uid").val();var f=$("#imgCode").val();function d(){var n=false;$.ajax({url:srsval.settings.baseurl+"/ajaxCheckAliasEPP.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{aliasName:i,uid:f,code:k,random:c},dataType:"json",success:function(o){if(o.random!=null&&o.random!=""&&o.random!=undefined){$("#random").val(o.random)}if("R1"==o.result){n={result:true,code:"__success",msg:""};return}if("EI9999"==o.code){n={result:false,code:"EI9999",msg:"您的网络不给力，请稍后再试。"};return}if(null!=o.msg&&""!=o.msg){n={result:false,code:o.code,msg:o.msg};return}n={result:false,code:o.code,msg:(srsval.settings.errorMessage_emailAliasEPP_exist!=""?srsval.settings.errorMessage_emailAliasEPP_exist:'该邮箱已存在，请重新输入或使用该邮箱直接<a name="'+srsval.settings.coverPoint_emailAliasEPP_exist_login+'" href="javascript:'+srsval.settings.logonUrlFunName+"('','','"+i+"');\">登录</a>")};return}});return n}if(b){var j=d();if(!j.result){srsval.highlight(l,i,j.code,j.msg);return false}else{srsval.unhighlight(l,i,j.code,j.msg);return true}}srsval.unhighlight(l,i,"__success","");return true},emailCodeGrap:function(h){var b=h.elementId;var e=h.messageId;var a=h.isAjaxCheck==null?true:h.isAjaxCheck;var j=$(b).val();var f=$(h.emailId).val();var c=h.scen;if(j.length==0){srsval.highlight(h,j,"__empty","请输入邮箱验证码。");return false}if(j.length!=4){srsval.highlight(h,j,"__length","请输入4位数字验证码。");return false}var d=/^\d{4}$/;if(!d.test(j)){srsval.highlight(h,j,"__format","请输入4位数字验证码。");return false}function i(){var k;$.ajax({url:srsval.settings.baseurl+"/ajax/code/valemcode.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:false,cache:false,data:{scen:c,code:j,email:f},dataType:"json",success:function(l){if("R0000"==l.returnCode){k={result:true,code:"__success",msg:""};return}if(null!=l&&""!=l.returnMsg){if("1101"==l.returnCode){k={result:false,code:"1101",msg:"邮箱验证码错误，请重新输入。"};return}else{if("1103"==l.returnCode){k={result:false,code:"1103",msg:"验证码已失效，请重新获取。"};return}}k={result:false,code:l.returnCode,msg:l.returnMsg};return}k={result:false,code:"",msg:"邮箱验证码错误或已失效，请重新输入！"};return}});return k}if(a){var g=i();if(!g.result){srsval.highlight(h,j,g.code,g.msg);return false}else{srsval.unhighlight(h,j,g.code,g.msg);return true}}srsval.unhighlight(h,j,"__success","");return true}};var reg=reg||{};var gImgVerCdeErrorCount=0;var gImgVerCdeErrorCountMax=10;var grapGoOnMobile="";var offlineGoOnMobile="";var eppGoOnMobile="";var token="";var imgCodeValidObj={methodName:"imgCode",elementId:"#imgCode",messageId:"#imgCodeTip",isEnableCache:true,isEmptyHighlight:true,uidId:"#uid"};var mobileAliasEPPValidObj={methodName:"mobileAliasEPP",elementId:"#mobileAlias",messageId:"#aliasTip",isEnableCache:true,isEmptyHighlight:true,imgCodeValidObj:imgCodeValidObj,imgCodeShowFun:function(){$("#imgCodeDiv").show();srscommon.fun_getVcode("#imgSrc","#uid")}};var smsCodeValidObj={methodName:"smsCode",elementId:"#smsCode",messageId:"#smsCodeTip",isEmptyHighlight:true,phoneNumId:"#mobileAlias",scen:"PERSON_MOBILE_REG_VERIFY_MOBILE"};var setPswValidObj={methodName:"setPsw",elementId:"#setPsw",messageId:"#setPswTip",isEmptyHighlight:true};var protocolValidObj={methodName:"protocol",elementId:"#protocol",messageId:"#protocolTip",isEmptyHighlight:true};reg.input=function(){$(".input-box .title, .input-box .placeholder").click(function(){$(this).parent().find(".placeholder").hide();$(this).parent().find("input:visible").focus()});$(".input-box input").blur(function(){if($(this).val()==""){$(this).siblings(".placeholder").show()}}).focus(function(){$(this).siblings(".placeholder").hide()});$(".password-field input").keyup(function(){if($(this).val()==""){$(this).next().hide()}else{$(this).next().show()}$(".password-field input").val($(this).val())});$(".password-field .eye").click(function(){$(this).toggle();$(this).prev().toggle();$(this).siblings(".eye").toggle();$(this).siblings(".eye").prev().toggle()})};reg.siller=function(){if(typeof isEnableSiller!="undefined"&&isEnableSiller==true){function a(){var b=siller.queryToken();if(b&&"REF"!=b){$("#imgCode").val(b);$("#imgCode").trigger("blur")}}siller.init({backImg:"",tip0:"",tip1:"",tip2:"",tip3:"",backWidth:"380px",backHeight:"",slWidth:"",slHeight:"",fontSize:"",target:"siller",callback:a,url:"https://dt.suning.com/detect/dt/dragDetect.json"});siller.show()}};reg.imgVerify=function(){$("#imgSrc,#changeImgSrc").click(function(){srscommon.fun_getVcode("#imgSrc","#uid");$("#imgCode").val("");clearErrTip("#imgCode","#imgCodeTip","")});$("#imgCode").focus(function(){clearErrTip("#imgCode","#imgCodeTip","")}).blur(function(){var a=$(this).val();if(a.length!=4){srsval.valid({validObjs:[$.extend({},imgCodeValidObj,{isAjaxCheck:false,isEmptyHighlight:false})]})}}).keyup(function(b){var a=$(this).val();if(a.length==4){srsval.valid({validObjs:[$.extend({},imgCodeValidObj,{isAjaxCheck:true,isEmptyHighlight:false})]})}else{clearErrTip("#imgCode","#imgCodeTip","")}})};reg.dialog=function(){$(".reg-dialog .close").click(function(){$(this).closest(".reg-dialog").hide()})};reg.passwordSetSuggestion=function(){$(".suggestion a").click(function(){$.mLionDialog({css:{width:"450px"},message:$(".password-set-suggestion"),overlayCss:{background:"black",opacity:"0.3"},title:"密码设置建议",fadeIn:200,fadeOut:200})})};function showErrTip(b,a,c){$(b).siblings(".ok").hide();if("#smsCode"==b){$(".dialing").hide();$(".msg-sent").hide()}$(a).html(c).show()}function clearErrTip(b,a,c){$(b).siblings(".ok").hide();$(a).html(c).hide()}function showInputSuccessStyle(a){if("#setPsw"==a||"#setPswPlain"==a){return false}$(a).siblings(".ok").show()}var voiceCodeEable=false;var srsSmsSeqNum=0;$(function(){reg.input();reg.dialog();reg.passwordSetSuggestion();$("#cangrap-confirm-login").live("click",function(){logonUrl("","",$("#mobileAlias").val())});$("#cangrap-confirm-continue").live("click",function(){grapGoOnMobile=$("#mobileAlias").val();$("#alias").val(grapGoOnMobile);$("#iCode").val($("#imgCode").val());$(".dialog1").hide();$("#grapReg_form").submit()});$("#epp-mobile-confirm-login").live("click",function(){srscommon.eppLogin()});srsval.init({baseurl:$("#baseUrl").val(),highlight:function(g,f,h,e){var c=g.elementId;var d=g.messageId;var b=g.isEmptyHighlight;if(!b&&h=="__empty"){clearErrTip(c,d,"");return}switch(c){case"#mobileAlias":if(h=="cmf_cangrap"){$(".dialog1").show();clearErrTip(c,d,"");return}if(h=="cmf_offline"){account.winAct({isOpen:true,isIframe:true,id:"offline-confirm"});clearErrTip(c,d,"");return}if(h=="E001_EPPAlaisExit"){$(".dialog2").show();clearErrTip(c,d,"");return}break;case"#imgCode":gImgVerCdeErrorCount++;if(gImgVerCdeErrorCount>=gImgVerCdeErrorCountMax){gImgVerCdeErrorCount=0;srscommon.fun_getVcode("#imgSrc","#uid");$("#imgCode").val("")}break}switch(c){case"#smsCode":if(h=="1103"){showErrTip(c,d,e);$("#smsCode").val("");return}}showErrTip(c,d,e)},unhighlight:function(f,e,g,d){var b=f.elementId;var c=f.messageId;switch(b){}clearErrTip(b,c,"");showInputSuccessStyle(b)}});srscommon.checkImgShowAndVoice(function(b){$("#imgCodeDiv").show();srscommon.fun_getVcode("#imgSrc","#uid")},function(b){$("#imgCodeDiv").hide();$("#uid").val("")},function(){voiceCodeEable=true},function(){voiceCodeEable=false});$("#mobileAlias").focus(function(){clearErrTip("#mobileAlias","#aliasTip","")}).blur(function(){srsval.valid({validObjs:[$.extend({},mobileAliasEPPValidObj,{grapGoOnMobile:grapGoOnMobile,isAjaxCheck:false,isEmptyHighlight:false})]})});if($("#mobileAlias").val()!=""){$("#mobileAlias").trigger("click")}reg.imgVerify();reg.siller();$("#imgCode").focus(function(){clearErrTip("#imgCode","#imgCodeTip","")}).blur(function(){var b=$(this).val();if(b.length!=4){srsval.valid({validObjs:[$.extend({},imgCodeValidObj,{isAjaxCheck:false,isEmptyHighlight:false})]})}}).keyup(function(c){var b=$(this).val();if(b.length==4){srsval.valid({validObjs:[$.extend({},imgCodeValidObj,{isAjaxCheck:true,isEmptyHighlight:false})]})}else{clearErrTip("#imgCode","#imgCodeTip","")}});$("#smsCode").focus(function(){clearErrTip("#smsCode","#smsCodeTip","")}).blur(function(){var b=$(this).val();if(b==""){clearErrTip("#smsCode","#smsCodeTip","")}if(b.length!=6){srsval.valid({validObjs:[$.extend({},smsCodeValidObj,{isAjaxCheck:false,isEmptyHighlight:false})]})}}).keyup(function(b){var c=$(this).val();if(c.length==6){srsval.valid({validObjs:[$.extend({},smsCodeValidObj,{isAjaxCheck:true,isEmptyHighlight:false})]})}else{clearErrTip("#smsCode","#smsCodeTip","")}});$(".main .send-msg").click(function(){var d=$(this);if(d.hasClass("disable")){return}$(".dialing").hide();$(".msg-sent").hide();$(".send-success").show();if(srsSmsSeqNum>1){$("#yyTip").hide()}clearTimeout(window.dialTimeout);offlineGoOnMobile=$("#mobileAlias").val();_mobileAliasEPPValidObj=$.extend({},mobileAliasEPPValidObj,{grapGoOnMobile:grapGoOnMobile,offlineGoOnMobile:offlineGoOnMobile});if(!srsval.valid({validObjs:[_mobileAliasEPPValidObj]})){return}if($("#uid").val().length>0){if(!srsval.valid({validObjs:[imgCodeValidObj]})){return}}clearTimeout(window.dialTimeout);d.addClass("disable").text("60秒后重新获取");var c=60;var b=setInterval(function(){c=parseInt(d.text())-1;if(c>0){d.text(c+"秒后重新获取")}else{clearInterval(b);d.text("获取短信验证码").removeClass("disable")}},1000);if(voiceCodeEable){setTimeout(function(){if(srsSmsSeqNum==1){$("#yyTip").show()}else{if(srsSmsSeqNum>2){$("#yyTip").hide()}}},20000)}reg.sendSms()});$("#sendYy").click(function(){_mobileAliasEPPValidObj=$.extend({},mobileAliasEPPValidObj,{grapGoOnMobile:grapGoOnMobile});if(!srsval.valid({validObjs:[_mobileAliasEPPValidObj]})){return}if($("#uid").val().length>0){if(!srsval.valid({validObjs:[imgCodeValidObj]})){return}}reg.sendVoice()});var a='<em>6-20个字符，由字母，数字和符号的两种以上组合。</em><a id="pswSuggestion" href="javascript:void(0)">密码设置建议</a>';$(".password-field input").focus(function(){clearErrTip("#setPsw","#setPswTip","");$(".suggestion").html(a).show();reg.passwordSetSuggestion()}).blur(function(){if($(".password-field input").data("canntBlur")){return}$(".suggestion").hide();srsval.valid({validObjs:[$.extend({},setPswValidObj,{isEmptyHighlight:false})]})}).keyup(function(b){if($("#setPsw").val().length>=6){$("#setPsw_rank").show();reg.checkPwdSafeLevel("#setPsw","#setPsw_rank")}else{$("#setPsw_rank").hide()}});$("#pswSuggestion").live("mouseover",function(){$(".password-field input").data("canntBlur",true)}).live("mouseout",function(){$(".password-field input").data("canntBlur",false)});srscommon.bindKeypressCapsLock("setPsw",function(){$(".suggestion").html("键盘大写锁定已打开，请注意大小写 ")},function(){$(".suggestion").html(a);reg.passwordSetSuggestion()});srscommon.bindKeypressCapsLock("setPswPlain",function(){$(".suggestion").html("键盘大写锁定已打开，请注意大小写 ")},function(){$(".suggestion").html(a);reg.passwordSetSuggestion()});$("#protocol").click(function(){srsval.valid({validObjs:[protocolValidObj]})});$("#save").click(function(){reg.save()})});reg.sendSms=function(){$.ajax({url:"/srs-web/ajax/code/sms.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{scen:"PERSON_MOBILE_REG_VERIFY_MOBILE",phoneNum:$("#mobileAlias").val(),uid:$("#uid").val(),code:$("#imgCode").val()},dataType:"json",async:false,success:function(a){if(a.isNeedImageCode=="true"){if($("#imgSrc").is(":visible")==false){$("#imgCodeDiv").show();srscommon.fun_getVcode("#imgSrc","#uid")}}if("R0000"==a.returnCode){if(a.lessTimes>0){reg.sendCodeCallback("R0000","手机验证码已经成功发送，请注意查收，您还有"+a.lessTimes+"次获取机会",a.seqNum,a.lessTimes)}else{if(0==a.lessTimes){reg.sendCodeCallback("R0000","手机验证码已经成功发送，请注意查收",a.seqNum,a.lessTimes)}}}else{if("R0001"==a.returnCode){reg.sendCodeCallback("R0001","您的操作已失效，请刷新页面后操作！",a.seqNum,a.lessTimes)}else{if(null!=a&&""!=a.returnMsg){reg.sendCodeCallback(a.returnCode,a.returnMsg,a.seqNum,a.lessTimes)}else{reg.sendCodeCallback("","短信验证码发送失败",-1,-1)}}}},error:function(){reg.sendCodeCallback("","您的网络不给力，请稍候再试",-1,-1)}})};reg.sendCodeCallback=function(b,c,f,d){if("R0000"==b){$("#smsCodeTip").hide();$(".msg-sent").show();srsSmsSeqNum=f}else{if(b=="R0002"){$(".msg-sent").hide();$("#smsCodeTip").html(c).show();var a=$("#uid").val();if(a=="siller"){function e(){var g=siller.queryToken();if(g&&"REF"!=g){$("#imgCode").val(g);$("#imgCode").trigger("blur")}}siller.init({backImg:"",tip0:"",tip1:"",tip2:"",tip3:"",backWidth:"380px",backHeight:"",slWidth:"",slHeight:"",fontSize:"",target:"siller",callback:e,url:"https://dt.suning.com/detect/dt/dragDetect.json"});siller.show()}}else{if(null!=c&&""!=c){$(".msg-sent").hide();$("#smsCodeTip").html(c).show()}else{$(".msg-sent").hide();$("#smsCodeTip").html("发送失败").show()}}}};reg.sendVoice=function(){$.ajax({url:"/srs-web/ajax/code/yy.do",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{scen:"PERSON_MOBILE_REG_VERIFY_VOICE",phoneNum:$("#mobileAlias").val(),uid:$("#uid").val(),code:$("#imgCode").val()},dataType:"json",async:false,success:function(a){if(a.isNeedImageCode=="true"){if($("#imgSrc").is(":visible")==false){$("#imgCodeDiv").show();srscommon.fun_getVcode("#imgSrc","#uid")}}if("R0000"==a.returnCode){reg.sendYuyinCallback("R0000","稍后将有苏宁的电话拨打给您，告知验证码内容，请耐心等待~",a.seqNum,a.lessTimes)}else{if("R0001"==a.returnCode){reg.sendYuyinCallback("R0001","您的操作已失效，请刷新页面后操作！",a.seqNum,a.lessTimes)}else{if(null!=a&&""!=a.returnMsg){reg.sendYuyinCallback(a.returnCode,a.returnMsg,a.seqNum,a.lessTimes)}else{reg.sendYuyinCallback("","语音验证码发送失败",-1,-1)}}}},error:function(){reg.sendYuyinCallback("__error","语音验证码发送失败",-1,-1)}})};reg.sendYuyinCallback=function(a,b,d,c){if("R0000"==a){$(".tell").html("稍后苏宁将拨打电话给您，告知验证码");$.mLionDialog({css:{width:"420px"},message:$(".send-voice-success"),overlayCss:{background:"black",opacity:"0.3"},title:"语音获取验证码",fadeIn:200,fadeOut:200});$("#smsCodeTip").html("");$("#yyTip").hide();$(".msg-sent").hide();$(".dialing").show();window.dialTimeout=setTimeout(function(){$(".dialing").hide();$(".msg-sent").hide();$(".send-success").show()},20000)}else{$.mLionDialog({css:{width:"420px"},message:$(".send-voice-success"),overlayCss:{background:"black",opacity:"0.3"},title:"语音获取验证码",fadeIn:200,fadeOut:200});if(null!=b&&""!=b){$(".tell").html(b)}else{$(".tell").html("语音验证码发送失败")}}};reg.checkPwdSafeLevel=function(b,a){var d=$(b).val();var e=$(a);if(d.length>=6){var c=checkPasswordStrength(d);if("A"==c){e.removeClass("high-level middle-level").addClass("low-level")}if("B"==c){e.removeClass("high-level").addClass("middle-level")}if("C"==c){e.addClass("high-level")}}else{e.removeClass("high-level middle-level low-level")}};reg.save=function(){var a=$.extend({},mobileAliasEPPValidObj,{isAjaxCheck:false});if(!srsval.valid({validObjs:[a,imgCodeValidObj,protocolValidObj]})){$("#step1save").show();$("#step1saveing").hide();return}a=$.extend({},mobileAliasEPPValidObj,{grapGoOnMobile:grapGoOnMobile,offlineGoOnMobile:offlineGoOnMobile,eppGoOnMobile:eppGoOnMobile});if(!srsval.valid({validObjs:[a]})){return}if(!srsval.valid({validObjs:[smsCodeValidObj,setPswValidObj,protocolValidObj]})){return}$("#enterReg_form").submit()};function checkPassword(b){var a=new Object();if(isEmptyPassword(b)){a.success=false;a.msg="请输入6-20位密码！";return a}if(isTooShort(b)){a.success=false;a.msg="请输入6-20位密码！";return a}if(isAllSameChars(b)){a.success=false;a.msg="不能为同一字符！";return a}if(hasAllIncreaseChars(b)||hasAllDecreaseChars(b)){a.success=false;a.msg="不能输入连续字符！";return a}if(isAllNum(b)){a.success=false;a.msg="不能为纯数字！";return a}if(isAllLetter(b)){a.success=false;a.msg="不能为纯字母！";return a}if(isAllSymbol(b)){a.success=false;a.msg="不能为纯符号！";return a}if(hasIllegalSymbol(b)){a.success=false;a.msg="密码只能由英文、数字及符号组成！";return a}if(!hasAllIllegalSymbol(b)){a.success=false;a.msg="密码只能由英文、数字及符号组成！";return a}a.success=true;a.msg="OK.";return a}function isEmptyPassword(a){return a==null||a.length==0}function isTooShort(a){return a.length<6}function hasNum(b){var a=/\d/;return a.test(b)}function isAllNum(b){var a=/^\d+$/;return a.test(b)}function hasLetter(b){var a=/[a-zA-Z]/;return a.test(b)}function isAllLetter(b){var a=/^[a-zA-Z]+$/;return a.test(b)}function hasSymbol(b){var a=/[^0-9a-zA-Z\s<>;'\\]/;return a.test(b)}function isAllSymbol(b){var a=/^[^0-9a-zA-Z\s<>;'\\]+$/;return a.test(b)}function hasSpace(b){var a=/\s/g;return a.test(b)}function hasIllegalSymbol(c){var b=/[\s<>;'\\]/;var a=/[\u4e00-\u9fa5]/;return b.test(c)||a.test(c)}function hasAllIllegalSymbol(c){var a=/^[0-9a-zA-Z~!@#$%^&*()_+-={}\[\]?,.\/]+$/;return a.test(c)}function isAllSameChars(d){if(d==null||d.length<2){return false}var c=d.charCodeAt(0);var b=1;for(b=1;b<d.length;b++){var a=d.charCodeAt(b);if(a!=c){return false}}return true}function hasRepeat6Chars(b){var a=/(.)\1\1\1\1\1/;return a.test(b)}function hasIncrease6Chars(e){if(e==null||e.length<6){return false}var d=e.charCodeAt(0);var c=1;var b=1;for(b=1;b<e.length;b++){var a=e.charCodeAt(b);if(a==d+1){c++;if(c>=6){return true}}else{c=1}d=a}return false}function hasDecrease6Chars(e){if(e==null||e.length<6){return false}var d=e.charCodeAt(0);var c=1;var b=1;for(b=1;b<e.length;b++){var a=e.charCodeAt(b);if(a==d-1){c++;if(c>=6){return true}}else{c=1}d=a}return false}function hasAllIncreaseChars(f){if(f==null){return false}var d=f.length;var e=f.charCodeAt(0);var c=1;var b=1;for(b=1;b<f.length;b++){var a=f.charCodeAt(b);if(a==e+1){c++;if(c>=d){return true}}else{c=1}e=a}return false}function hasAllDecreaseChars(f){if(f==null){return false}var d=f.length;var e=f.charCodeAt(0);var c=1;var b=1;for(b=1;b<d;b++){var a=f.charCodeAt(b);if(a==e-1){c++;if(c>=d){return true}}else{c=1}e=a}return false}function checkPasswordStrength(b){var a="A";if(isTooShort(b)){a="A"}else{if(hasNum(b)&&hasLetter(b)&&hasSymbol(b)){a="C"}else{if(hasNum(b)&&hasLetter(b)){a="B"}else{if(hasNum(b)&&hasSymbol(b)){a="B"}else{if(hasSymbol(b)&&hasLetter(b)){a="B"}else{if(isAllNum(b)||isAllLetter(b)||isAllSymbol(b)){a="A"}}}}}}return a};