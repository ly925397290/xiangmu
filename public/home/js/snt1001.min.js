(function(a,b){a.fn.popWin=function(u){var m=this,l={theme:"a",content:"",width:372,showTitle:true,titleTxt:"\u6807\u9898",showBtn:true,showOneBtn:false,showClose:true,btnAlign:"center",btnYes:"\u786e\u5b9a",btnNo:"\u53d6\u6d88",yesClose:true,showMask:true,maskClose:false,keyClose:false,autoShow:false,callback:null,closeAfter:null},g=a.extend({},l,u),e,r,f,n,p,t,q,k;q=window.top.document.body||window.document.body;r=a(q).find(".sf-popWin").length>0?a(q).find(".sf-popWin:last").css("z-index")*1+14:14;k=!-[1,]&&!window.XMLHttpRequest;e={creatEle:function(){f[f.length]='<div popid="';f[f.length]=r;f[f.length]='" class="sf-popWin ';f[f.length]=g.theme;f[f.length]='" style="width: ';f[f.length]=g.width;f[f.length]="px; z-index: ";f[f.length]=r+1;f[f.length]='">';f[f.length]=g.showTitle?('<div class="sf-popWinTitle">'+g.titleTxt+(g.showClose?'<a class="sf-popWinClose" popwinclose href="#">&times;</a>':"")+"</div>"):(g.showClose?'<a class="sf-popWinClose" popwinclose href="#">&times;</a>':"");f[f.length]='<div class="sf-popWinMain"><div class="sf-popWinContent">';f[f.length]=g.content?g.content:'<div class="sf-popWinLoading"><i></i>\u52a0\u8f7d\u4e2d...</div>';f[f.length]="</div></div>";f[f.length]=g.showBtn?('<div class="sf-popWinBtns '+g.theme+" sf-popWinBtns-"+g.btnAlign+'"><a href="#" class="sf-popWinBtnYes"'+(g.yesClose?"popwinclose":"")+">"+g.btnYes+"</a>"+(g.showOneBtn?"":('<a href="#" popwinclose class="sf-popWinBtnNo">'+g.btnNo+"</a>"))+"</div>"):"";f[f.length]="</div>";f[f.length]=g.showMask?('<div popid="'+r+'" class="sf-popWinMask '+("mask_"+g.theme)+'" style="z-index: '+r+"; height: "+n+'px" '+(g.maskClose?"popwinclose":"")+"></div>"+(k?('<iframe class="sf-popWinFrame" popid="'+r+'" scrolling="no" frameborder="0" style="height: '+n+'px"></iframe>'):"")):'<div popid="'+r+'" class="sf-popWinMask" style="display: none; z-index: '+r+"; height: "+n+'px"'+(g.maskClose?"popwinclose":"")+"></div>"},bindPop:function(){if(g.autoShow){e.showBox(q)}else{m.live("click",function(c){c.preventDefault();e.showBox(this)})}},showBox:function(c){p=window.top.document.body.clientHeight||window.document.body.clientHeight;t=window.top.document.body.scrollHeight||window.document.body.scrollHeight;h=a(window.top.document).height();n=p>t?p:t;n=n>h?n:h;f=[];e.creatEle();if(a(q).find(".sf-popWin[popid="+r+"]").length>0){return}if(a(c).attr("disablePopWin")===b){a(q).append(f.join(""))}if(a.type(g.callback)=="function"){g.callback(e.popContentBox(),e.setPos,a(c))}e.setPos();e.closeBox();e.resizeMask()},closeBox:function(){a(q).find(".sf-popWin[popid="+r+"] [popwinclose],.sf-popWinMask[popid="+r+"][popwinclose]").on("click",function(c){c.preventDefault();a(q).find(".sf-popWin[popid="+r+"], .sf-popWinMask[popid="+r+"], .sf-popWinFrame[popid="+r+"]").remove();if(a.type(g.closeAfter)=="function"){g.closeAfter()}});a(document).one("keyup",function(d){var c=d.keyCode||d.which;if(c==27&&g.keyClose){a(q).find(".sf-popWin, .sf-popWinMask, .sf-popWinFrame").remove()}})},setPos:function(){var d=a(q).find(".sf-popWin"),c=window.top.document.documentElement.clientHeight||window.document.documentElement.clientHeight;d.each(function(){var w=a(this),A=w.outerWidth(),v,B=w.find(".sf-popWinMain"),s=w.find(".sf-popWinTitle").outerHeight(),o=w.find(".sf-popWinBtns").outerHeight(),y=w.find(".sf-popWinContent").outerHeight(),x=s+o+72,z=x+y;if(z>=c){B.css({overflow:"hidden","overflow-y":"auto",height:(c-x<300?300:c-x)})}else{B.removeAttr("style")}v=w.outerHeight();w.css({marginLeft:-A/2,marginTop:-v/2})})},popContentBox:function(){return a(q).find(".sf-popWin[popid="+r+"], .sf-popWinMask[popid="+r+"], .sf-popWinFrame[popid="+r+"]")},resizeMask:function(){a(window).resize(function(){p=window.top.document.body.clientHeight||window.document.body.clientHeight;t=window.top.document.body.scrollHeight||window.document.body.scrollHeight;h=a(window.top.document).height();n=p>t?p:t;n=n>h?n:h;a(q).find(".sf-popWinMask").css("height",n+"px");e.setPos()})}};e.bindPop();return m||a(q)};a.fn.scrollpic=function(p){var k=this,g={list:[{url:"",src:"",txt:"",width:"auto",height:"auto"}],height:300,showNum:true,showNumTxt:true,showArr:true,showTxt:false,transitionTime:500,time:4000,effect:"fade"},e=a.extend({},g,p),f="",l="",n=e.list.length,c,d,m;c={build:function(){if(n<1){return}for(var o=0;o<n;o++){var q=e.list[o].url||"";var r="";if(!(q==""||q.indexOf("javascript")!=-1)){r='target="_blank"'}if(o==0){f+='<li style="z-index: 2; opacity: 1; filter:alpha(opacity=100)" class="focusShow"><a href="'+e.list[o].url+'" '+r+' style="height:'+e.height+'px"><img lazy-src="'+e.list[o].src+'" alt="" style="margin-left: -'+e.list[o].width/2+"px; margin-top: -"+e.list[o].height/2+'px" /></a>'+(e.showTxt&&e.list[o].txt?("<p>"+e.list[o].txt+"</p>"):"")+"</li>";l+='<a href="javascript:;" focusID="'+o+'" class="focusSel">'+(e.showNumTxt?o+1:"")+"</a>"}else{if(e.effect=="fade"){f+='<li style="opacity: 0;  filter:alpha(opacity=0)"><a href="'+e.list[o].url+'" '+r+' style="height:'+e.height+'px"><img lazy-src="'+e.list[o].src+'" alt="" style="margin-left: -'+e.list[o].width/2+"px; margin-top: -"+e.list[o].height/2+'px" /></a>'+(e.showTxt&&e.list[o].txt?("<p>"+e.list[o].txt+"</p>"):"")+"</li>"}else{f+='<li style="opacity: 1; visibility: hidden"><a href="'+e.list[o].url+'" '+r+' style="height:'+e.height+'px"><img lazy-src="'+e.list[o].src+'" alt="" style="margin-left: -'+e.list[o].width/2+"px; margin-top: -"+e.list[o].height/2+'px" /></a>'+(e.showTxt&&e.list[o].txt?("<p>"+e.list[o].txt+"</p>"):"")+"</li>"}l+='<a href="javascript:;" focusID="'+o+'">'+(e.showNumTxt?o+1:"")+"</a>"}}d='<ul class="focusImages" style="height: '+e.height+'px">'+f+"</ul>"+(e.showNum?('<div class="focusNumBox">'+l+"</div>"):"")+(e.showArr?('<a href="javascript:;" class="focusPreArr"></a><a href="javascript:;" class="focusNextArr"></a>'):"");k.css({position:"relative",overflow:"hidden"}).html(d)},pos:function(){var r=k.find(".focusPreArr,.focusNextArr"),o=k.find(".focusNumBox"),q=k.find(".focusImages li p");r.css({marginTop:-r.height()/2});o.css({marginLeft:-o.width()/2});if(!q.length){return}q.each(function(){var s=a(this).innerHeight();a(this).css({top:e.height-s})})},automove:function(o){m=k.find(".focusShow").index();if(o=="pre"){if(m==0){c.effectchange(m,n-1,e.effect,o)}else{c.effectchange(m,m-1,e.effect,o)}}else{if(m==n-1){c.effectchange(n-1,0,e.effect)}else{c.effectchange(m,m+1,e.effect)}}},effectchange:function(s,r,t,q){var v=k.find(".focusImages li"),u=k.find(".focusNumBox a"),o=k.find(".focusImages li").width();if(s==r||v.is(":animated")){return}if(t=="fade"){v.eq(s).css({zIndex:1}).animate({opacity:0},e.transitionTime,function(){a(this).removeClass()});v.eq(r).css({zIndex:2}).animate({opacity:1},e.transitionTime,function(){a(this).addClass("focusShow")})}else{if(t=="horizontal"){v.css({opacity:1});if(q=="pre"){v.eq(s).css({zIndex:1}).animate({left:o},e.transitionTime,function(){a(this).removeClass().css({visibility:"hidden"})});v.eq(r).css({left:-o,zIndex:2,visibility:"visible"}).animate({left:0},e.transitionTime,function(){a(this).addClass("focusShow")})}else{v.eq(s).css({zIndex:1}).animate({left:-o},e.transitionTime,function(){a(this).removeClass().css({visibility:"hidden"})});v.eq(r).css({left:o,zIndex:2,visibility:"visible"}).animate({left:0},e.transitionTime,function(){a(this).addClass("focusShow")})}}}u.removeClass("focusSel").eq(r).addClass("focusSel")},act:function(){var r=setInterval(c.automove,e.time),q=k.children("a"),o=k.find(".focusImages li p");k.hover(function(){clearInterval(r);q.add(o).fadeIn()},function(){r=setInterval(c.automove,e.time);q.add(o).fadeOut()});q.click(function(t){t.preventDefault();var s=this.className;switch(s){case"focusPreArr":c.automove("pre");break;case"focusNextArr":c.automove();break}});k.find(".focusNumBox a").mouseover(function(){var s=a(this).attr("focusID");var t=k.find(".focusShow").index();var u=k.find(".focusNumBox .focusSel").attr("focusID");if(u<s){c.effectchange(t,s,e.effect)}else{c.effectchange(t,s,e.effect,"pre")}})},init:function(){c.build();c.pos();c.act()}};c.init();return k};String.prototype.checklen=function(){var d=0,c=this.split("");for(var e=0;e<c.length;e++){if(c[e].charCodeAt(0)<299){d++}else{d+=2}}return d}})(jQuery);(function(b){b.fn.lightbox=function(F){var w=b.extend({},b.fn.lightbox.defaults,F);return this.each(function(){b(this).click(function(){I();B(this);return false})});function I(){b("#sf-overlay").remove();b("#sf-lightbox").remove();w.inprogress=false;if(w.jsonData&&w.jsonData.length>0){var e=w.jsonDataParser?w.jsonDataParser:b.fn.lightbox.parseJsonData;w.imageArray=[];w.imageArray=e(w.jsonData)}var d='<div id="sf-outerImageContainer"><div id="sf-imageContainer"><iframe id="sf-lightboxIframe" /><img id="sf-lightboxImage"><div id="sf-hoverNav"><a href="javascript://" title="'+w.strings.prevLinkTitle+'" id="sf-prevLink"></a><a href="javascript://" id="nextLink" title="'+w.strings.nextLinkTitle+'"></a></div><div id="sf-loading"><a href="javascript://" id="sf-loadingLink"><img src="'+w.fileLoadingImage+'"></a></div></div></div>';var f='<div id="sf-imageDataContainer" class="fixfloat"><div id="sf-imageData"><div id="imageDetails"><span id="caption"></span><span id="numberDisplay"></span></div><div id="sf-bottomNav">';if(w.displayHelp){f+='<span id="helpDisplay">'+w.strings.help+"</span>"}f+='<a href="javascript://" id="sf-bottomNavClose" title="'+w.strings.closeTitle+'"><img src="'+w.fileBottomNavCloseImage+'"></a></div></div></div>';var c;if(w.navbarOnTop){c='<div id="sf-overlay"></div><div id="sf-lightbox">'+f+d+"</div>";b("body").append(c);b("#sf-imageDataContainer").addClass("sf-ontop")}else{c='<div id="sf-overlay"></div><div id="sf-lightbox">'+d+f+"</div>";b("body").append(c)}b("#sf-overlay").click(function(){D()}).hide();b("#sf-lightbox").click(function(){D()}).hide();b("#sf-loadingLink").click(function(){D();return false});b("#sf-bottomNavClose").click(function(){D();return false});b("#sf-outerImageContainer").width(w.widthCurrent).height(w.heightCurrent);b("#sf-imageDataContainer").width(w.widthCurrent);if(!w.imageClickClose){b("#sf-lightboxImage").click(function(){return false});b("#sf-hoverNav").click(function(){return false})}}function a(){var c=new Array(b(document).width(),b(document).height(),b(window).width(),b(window).height());return c}function G(){var e,d;if(self.pageYOffset){d=self.pageYOffset;e=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){d=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else{if(document.body){d=document.body.scrollTop;e=document.body.scrollLeft}}}var c=new Array(e,d);return c}function A(e){var c=new Date();var d=null;do{d=new Date()}while(d-c<e)}function B(d){b("embed, object").hide();var c=a();b("#sf-overlay").hide().css({width:"100%",height:c[1]+"px",opacity:w.overlayOpacity}).fadeIn();imageNum=0;if(!w.jsonData){w.imageArray=[];if(!d.rel||(d.rel=="")){w.imageArray.push(new Array(d.href,w.displayTitle?d.title:""))}else{b("a").each(function(){if(this.href&&(this.rel==d.rel)){w.imageArray.push(new Array(this.href,w.displayTitle?this.title:""))}})}}if(w.imageArray.length>1){for(i=0;i<w.imageArray.length;i++){for(j=w.imageArray.length-1;j>i;j--){if(w.imageArray[i][0]==w.imageArray[j][0]){w.imageArray.splice(j,1)}}}while(w.imageArray[imageNum][0]!=d.href){imageNum++}}var e=G();var f=e[1]+(c[3]/10);var g=e[0];b("#sf-lightbox").css({top:f+"px",left:g+"px"}).show();if(!w.slideNavBar){b("#sf-imageData").hide()}n(imageNum)}function n(c){if(w.inprogress==false){w.inprogress=true;w.activeImage=c;b("#sf-loading").show();b("#sf-lightboxImage").hide();b("#sf-hoverNav").hide();b("#sf-prevLink").hide();b("#nextLink").hide();if(w.slideNavBar){b("#sf-imageDataContainer").hide();b("#sf-imageData").hide();E()}else{E()}}}function E(){imgPreloader=new Image();imgPreloader.onload=function(){var d=imgPreloader.width;var e=imgPreloader.height;if(w.fitToScreen){var k=a();var f;var c=k[2]-2*w.borderSize;var g=k[3]-200;if(imgPreloader.height>g){d=parseInt((g/imgPreloader.height)*imgPreloader.width);e=g}else{if(imgPreloader.width>c){e=parseInt((c/imgPreloader.width)*imgPreloader.height);d=c}}}b("#sf-lightboxImage").attr("src",w.imageArray[w.activeImage][0]).width(d).height(e);C(d,e)};imgPreloader.src=w.imageArray[w.activeImage][0]}function D(){z();b("#sf-lightbox").hide();b("#sf-overlay").fadeOut();b("select, object, embed").show();b(".hide_select").hide()}function H(){if(w.loopImages&&w.imageArray.length>1){preloadNextImage=new Image();preloadNextImage.src=w.imageArray[(w.activeImage==(w.imageArray.length-1))?0:w.activeImage+1][0];preloadPrevImage=new Image();preloadPrevImage.src=w.imageArray[(w.activeImage==0)?(w.imageArray.length-1):w.activeImage-1][0]}else{if((w.imageArray.length-1)>w.activeImage){preloadNextImage=new Image();preloadNextImage.src=w.imageArray[w.activeImage+1][0]}if(w.activeImage>0){preloadPrevImage=new Image();preloadPrevImage.src=w.imageArray[w.activeImage-1][0]}}}function C(e,c){w.widthCurrent=b("#sf-outerImageContainer").outerWidth();w.heightCurrent=b("#sf-outerImageContainer").outerHeight();var d=Math.max(200,e+(w.borderSize*2));var f=(c+(w.borderSize*2));w.xScale=(d/w.widthCurrent)*100;w.yScale=(f/w.heightCurrent)*100;wDiff=w.widthCurrent-d;hDiff=w.heightCurrent-f;b("#sf-imageDataContainer").animate({width:d},w.resizeSpeed,"linear");b("#sf-outerImageContainer").animate({width:d},w.resizeSpeed,"linear",function(){b("#sf-outerImageContainer").animate({height:f},w.resizeSpeed,"linear",function(){J()})});if((hDiff==0)&&(wDiff==0)){if(jQuery.browser.msie){A(250)}else{A(100)}}b("#sf-prevLink").height(c);b("#nextLink").height(c)}function J(){b("#sf-loading").hide();b("#sf-lightboxImage").fadeIn("fast");K();H();w.inprogress=false}function K(){b("#numberDisplay").html("");if(w.imageArray[w.activeImage][1]){b("#caption").html(w.imageArray[w.activeImage][1]).show()}if(w.imageArray.length>1){var c;c=w.strings.image+(w.activeImage+1)+w.strings.of+w.imageArray.length;if(!w.disableNavbarLinks){if((w.activeImage)>0||w.loopImages){c='<a title="'+w.strings.prevLinkTitle+'" href="#" id="sf-prevLinkText">'+w.strings.prevLinkText+"</a>"+c}if(((w.activeImage+1)<w.imageArray.length)||w.loopImages){c+='<a title="'+w.strings.nextLinkTitle+'" href="#" id="nextLinkText">'+w.strings.nextLinkText+"</a>"}}b("#numberDisplay").html(c).show()}if(w.slideNavBar){b("#sf-imageData").slideDown(w.navBarSlideSpeed)}else{b("#sf-imageData").show()}var d=a();b("#sf-overlay").height(d[1]);y()}function y(){if(w.imageArray.length>1){b("#sf-hoverNav").show();if(w.loopImages){b("#sf-prevLink,#sf-prevLinkText").show().click(function(){n((w.activeImage==0)?(w.imageArray.length-1):w.activeImage-1);return false});b("#nextLink,#nextLinkText").show().click(function(){n((w.activeImage==(w.imageArray.length-1))?0:w.activeImage+1);return false})}else{if(w.activeImage!=0){b("#sf-prevLink,#sf-prevLinkText").show().click(function(){n(w.activeImage-1);return false})}if(w.activeImage!=(w.imageArray.length-1)){b("#nextLink,#nextLinkText").show().click(function(){n(w.activeImage+1);return false})}}L()}}function x(f){var d=f.data.opts;var e=f.keyCode;var c=27;var g=String.fromCharCode(e).toLowerCase();if((g=="x")||(g=="o")||(g=="c")||(e==c)){D()}else{if((g=="p")||(e==37)){if(d.loopImages){z();n((d.activeImage==0)?(d.imageArray.length-1):d.activeImage-1)}else{if(d.activeImage!=0){z();n(d.activeImage-1)}}}else{if((g=="n")||(e==39)){if(w.loopImages){z();n((d.activeImage==(d.imageArray.length-1))?0:d.activeImage+1)}else{if(d.activeImage!=(d.imageArray.length-1)){z();n(d.activeImage+1)}}}}}}function L(){b(document).bind("keydown",{opts:w},x)}function z(){b(document).unbind("keydown")}};b.fn.lightbox.parseJsonData=function(d){var a=[];b.each(d,function(){a.push(new Array(this.url,this.title))});return a};b.fn.lightbox.defaults={fileLoadingImage:"images/loading.gif",fileBottomNavCloseImage:"images/closelabel.png",overlayOpacity:0.8,borderSize:10,imageArray:new Array,activeImage:null,inprogress:false,resizeSpeed:350,widthCurrent:250,heightCurrent:250,xScale:1,yScale:1,displayTitle:true,navbarOnTop:true,slideNavBar:false,navBarSlideSpeed:350,displayHelp:false,strings:{help:" \u2190 / P - previous image\u00a0\u00a0\u00a0\u00a0\u2192 / N - next image\u00a0\u00a0\u00a0\u00a0ESC / X - close image gallery",prevLinkTitle:"previous image",nextLinkTitle:"next image",prevLinkText:"&laquo; Previous",nextLinkText:"Next &raquo;",closeTitle:"close image gallery",image:"Image ",of:" of "},fitToScreen:false,disableNavbarLinks:false,loopImages:false,imageClickClose:true,jsonData:null,jsonDataParser:null}})(jQuery);(function(g){g.fn.carousel=function(a){a=g.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scrolls:1,beforeStart:null,afterEnd:null},a||{});return this.each(function(){var w=false,y=a.vertical?"top":"left",D=a.vertical?"height":"width";var E=g(this),d=g("ul",E),B=g("li:visible",d),G=B.size(),H=a.visible;if(a.circular){d.prepend(B.slice(G-H-1+1).clone()).append(B.slice(0,H).clone());a.start+=H}var b=g("li:visible",d),v=b.size(),F=a.start;E.css("visibility","visible");b.css({overflow:"hidden","float":a.vertical?"none":"left"});d.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});E.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var z=a.vertical?f(b):k(b);var c=z*v;var x=z*H;b.css({width:b.width(),height:b.height()});d.css(D,c+"px").css(y,-(F*z));E.css(D,x+"px");g((F-a.scrolls<0&&a.btnPrev)).addClass("prev_disabled");g((F+a.scrolls>v-H&&a.btnNext)).addClass("next_disabled");g(a.btnPrev).hover(function(){if(!g(a.btnPrev).hasClass("prev_disabled")){g(a.btnPrev).addClass("prev_hover")}},function(){g(a.btnPrev).removeClass("prev_hover")});g(a.btnNext).hover(function(){if(!g(a.btnNext).hasClass("next_disabled")){g(a.btnNext).addClass("next_hover")}},function(){g(a.btnNext).removeClass("next_hover")});if(a.btnPrev){g(a.btnPrev).click(function(){return A(F-a.scrolls)})}if(a.btnNext){g(a.btnNext).click(function(){return A(F+a.scrolls)})}if(a.btnGo){g.each(a.btnGo,function(m,l){g(l).click(function(){return A(a.circular?a.visible+m:m)})})}if(a.mouseWheel&&E.mousewheel){E.mousewheel(function(m,l){return l>0?A(F-a.scrolls):A(F+a.scrolls)})}if(a.auto){setInterval(function(){A(F+a.scrolls)},a.auto+a.speed)}function C(){return b.slice(F).slice(0,H)}function A(l){if(!w){if(a.beforeStart){a.beforeStart.call(this,C())}if(a.circular){if(l<=a.start-H-1){d.css(y,-((v-(H*2))*z)+"px");F=l==a.start-H-1?v-(H*2)-1:v-(H*2)-a.scrolls}else{if(l>=v-H+1){d.css(y,-((H)*z)+"px");F=l==v-H+1?H+1:H+a.scrolls}else{F=l}}}else{if(l<0||l>v-H){return}else{F=l}}w=true;d.animate(y=="left"?{left:-(F*z)}:{top:-(F*z)},a.speed,a.easing,function(){if(a.afterEnd){a.afterEnd.call(this,C())}w=false});if(!a.circular){g(a.btnPrev).removeClass("prev_disabled");g(a.btnNext).removeClass("next_disabled");g((F-a.scrolls<0&&a.btnPrev)).addClass("prev_disabled");g((F+a.scrolls>v-H&&a.btnNext)).addClass("next_disabled")}}return false}})};function e(b,a){return parseInt(g.css(b[0],a))||0}function k(a){return a[0].offsetWidth+e(a,"marginLeft")+e(a,"marginRight")}function f(a){return a[0].offsetHeight+e(a,"marginTop")+e(a,"marginBottom")}})(jQuery);var STORE=STORE||{};STORE.fit=(function(){var textShow=function(text,defVal){$(text).each(function(){$(this).on("focus",function(){if(this.tagName=="INPUT"){defVal=this.defaultValue}var v=$.trim($(this).val());if(v==defVal){$(this).val("").css("color","#333")}});$(this).on("blur",function(){if(this.tagName=="INPUT"){defVal=this.defaultValue}var v=$.trim($(this).val());if(v==""||v==defVal){$(this).val(defVal).css("color","#999")}})})};var simulateSelect=function(){$(".sf-mockselect").each(function(){var _selectedVal=$(this).find(".sf-subcate").find("li.sf-selected").html();if($(this).find(".sf-subcate li").hasClass("sf-selected")){$(this).find(".sf-hd h3").html(_selectedVal)}$(this).click(function(){$(this).find(".sf-subcate").show()});$(this).hover(function(){},function(){$(this).find(".sf-subcate").hide()});$(this).on("click",".sf-seccate li",function(){var _cLen=$(this).children().length;var _h3=$(this).parents(".sf-mockselect").find(".sf-hd h3");if(_cLen==0){_h3.text($(this).text());$(this).parents(".sf-subcate").hide()}else{$(this).off("click");$(this).on("click","h5",function(){_h3.text($(this).text());$(this).parents(".sf-subcate").hide()})}});$(this).on("click","li.sf-h5 b",function(){$(this).parents("li").toggleClass("sf-down");$(this).parents("li").nextAll().toggle()})})};var focusImage=function(){$(".focusBox").each(function(){var data=eval($(this).attr("focus-data"));var h=$(this).attr("focus-height");var type=$(this).attr("focus-type");type=type?type:"fade";$(this).scrollpic({list:data,height:h,effect:type,showNumTxt:false})})};var JPlaceHolder={_check:function(){return"placeholder" in document.createElement("input")},init:function(){if(!this._check()){this.fix()}},fix:function(){jQuery(":input[placeholder]").each(function(index,element){var self=$(this),txt=self.attr("placeholder"),sw=self.outerWidth(),sf=self.css("float");self.wrap($("<div></div>").css({position:"relative",zoom:"1",border:"none",background:"none",padding:"none",margin:"none",width:sw,"float":sf}));var pos=self.position(),h=self.outerHeight(true),paddingleft=self.css("padding-left");var holder=$("<span></span>").text(txt).css({position:"absolute",left:pos.left,top:pos.top,height:h,lineHeight:h+"px",paddingLeft:paddingleft,color:"#aaa",border:0,"font-family":"Arial, Helvetica, sans-serif"}).appendTo(self.parent());self.focusin(function(e){holder.hide()}).focusout(function(e){if(!self.val()){holder.show()}});holder.click(function(e){holder.hide();self.focus()});setInterval(function(){if(self.val().length){holder.hide()}else{holder.show()}},10)})}};var searchSlide=function(){$(".sf-searchLayoutConfig .sf-searchPrice input,.sf-filterType .sf-searchPrice input").live("click",function(){$(this).parents(".sf-searchPrice").addClass("sf-searchPriceOpen").parents(".sf-layoutList").css("zIndex",2)});$("body").click(function(e){var _o=$(e.target);var _s=$(".sf-searchPrice *");if(_o.is(_s)&&_o.parents(".sf-searchPrice").find(".sf-searchPlug").is(":visible")){return}$(".sf-searchLayoutConfig .sf-searchPrice,.sf-filterType .sf-searchPrice").removeClass("sf-searchPriceOpen").parents(".sf-layoutList").css("zIndex",1)});$(".sf-searchPrice a,.sf-searchBtn").live("click",function(e){e.preventDefault();var o=$(this).parents(".sf-search");o=o.length?o:$(this).parents(".sf-filterType");var sp=o.find(".sf-startPrice").val()*1;var ep=o.find(".sf-endPrice").val()*1;if(e.target.className=="sf-clear"){o.find(".sf-searchPrice input").val("")}else{}$(".sf-searchLayoutConfig .sf-searchPrice,.sf-filterType .sf-searchPrice").removeClass("sf-searchPriceOpen").parents(".sf-layoutList").css("zIndex",1)});setInterval(function(){$(".sf-searchPrice input").each(function(){var _val=$(this).val();var _check=/^[0-9]*$/.test(_val);if(!_check){_val=_val.slice(0,_val.length-1)}$(this).val(_val)})},50)};var slideMore=function(){$(".sf-filterBrand>a,.sf-filterPrice>a").live("click",function(e){e.preventDefault();var _this=$(this);var _thisP=_this.toggleClass("sf-filterOpen").prev(".sf-filterBrandList");var _thisPrevH1=_thisP.height();var filterP=$(this).parents(".sf-filters");var fH=filterP.height();_thisP.toggleClass("sf-heightAuto");var _thisPrevH2=_thisP.height();var tH=fH+_thisPrevH2-_thisPrevH1;var tHup=fH-_thisPrevH1+_thisPrevH2;if(_this.hasClass("sf-filterOpen")){_this.text("\u6536\u8d77");filterP.height(tH)}else{filterP.height(tHup);_this.text("\u5c55\u5f00")}})};var category=function(){$(".sf-category dt").click(function(){$(this).toggleClass("sf-categoryClose").next("dd").toggle()})};var floorRank=function(){$(".sf-floorRight li").mouseover(function(){$(".sf-floorRight li .sf-floorDetail").hide();$(this).find(".sf-floorDetail").show()})};var toggleMenu=function(){$(".sf-allcate").hover(function(){$(this).parents(".sf-moduleList").css({zIndex:2});$(this).find("dd").show();if($(".slideFloat").length>0){$(".slideFloat").parents(".sf-layoutList").css({zIndex:11})}},function(){$(this).find("dd").hide();$(".sf-moreList").hide();$(".sf-allcate .sf-it a").removeClass("sf-sel");if($(".slideFloat").length>0){$(".slideFloat").parents(".sf-layoutList").css({zIndex:15})}});$(".sf-navbar .sf-navlist li").hover(function(){if($(this).parents(".sf-navbar").attr("navFirstcolor")){$(this).css("background-color",$(this).parents(".sf-navbar").attr("navFirstcolor"))}},function(){if($(this).parents(".sf-navbar").attr("navBgColor")){$(this).css("background-color",$(this).parents(".sf-navbar").attr("navBgColor"))}});$(".sf-allcate .sf-it a").hover(function(){if($(this).parents(".sf-navbar").attr("navFirstcolor")){$(this).css("background-color",$(this).parents(".sf-navbar").attr("navFirstcolor"))}},function(){if($(this).parents(".sf-navbar").attr("navBgColor")){$(this).css("background-color",$(this).parents(".sf-navbar").attr("navBgColor"))}});$(".sf-moreList a").live("mouseover",(function(){if($(this).parents(".sf-navbar").attr("navSecondcolor")){$(this).css("background-color",$(this).parents(".sf-navbar").attr("navSecondcolor"));$(this).parents(".sf-navbar").find(".sf-sel").css("background-color",$(this).parents(".sf-navbar").attr("navFirstcolor"))}}));$(".sf-moreList a").live("mouseout",(function(){if($(this).parents(".sf-navbar").attr("navFirstcolor")){$(this).css("background-color",$(this).parents(".sf-navbar").attr("navFirstcolor"))}}));if($(".sf-navbar").attr("navFirstcolor")){$(".sf-navlist").css("border-left-color",$(".sf-navbar").attr("navFirstcolor"));$(".sf-allcate dd ul li").css("border-top-color",$(".sf-navbar").attr("navFirstcolor"))}$(".sf-allcate .sf-it a").mouseover(function(){var _this=$(this);var _top=_this.position().top;$(".sf-moreList").css("top",_top-1);$(".sf-allcate .sf-it a").removeClass("sf-sel");_this.addClass("sf-sel");if(!_this.hasClass("sf-more")){$(".sf-moreList").hide();return}var _data=eval(_this.attr("moreData"));var _html=[];var _color=_this.parents(".sf-navbar").attr("navFirstcolor")||"none";if(_data.length>0&&_data[0].txt){for(var i=0;i<_data.length;i++){if(_data[i]){var sf_sort=_data[i]["sf-sort"]||"";var sf_category_item=_data[i]["sf-category-item"]||"";var attrs=sf_sort?" sf-sort='"+sf_sort+"'":"";attrs+=sf_category_item?" sf-category-item='"+sf_category_item+"'":"";var sa_uv=_data[i]["sa-uv"]||"";attrs+=sa_uv?" sa-uv='"+sa_uv+"'":"";_html[_html.length]='<a href="javascript:void(0);" style="background-color:'+_color+'" '+attrs+">"+html_encode(_data[i].txt)+"</a>"}}$(".sf-moreList").html(_html.join("")).show();if($(".sf-navbar").attr("navFirstcolor")){$(".sf-allcate li.sf-moreList a").css("border-bottom-color",$(".sf-navbar").attr("navFirstcolor"))}}else{$(".sf-moreList").hide()}});var _cates=$(".sf-navbar .sf-subnav .sf-it a");for(var j=0;j<_cates.length;j++){try{var _catedata=eval($(_cates[j]).attr("moreData"));if(_catedata&&_catedata.length>0&&_catedata[0].txt){}else{$(_cates[j]).removeClass("sf-more")}}catch(e){window.debug&&console.info("导航内分类类别加载异常",e)}}};var videoPlay=function(){$(".sf-shipmask").click(function(){var videoUrl=$("#videoUrl").attr("videourl");$(this).hide();var html='<object width="790" height="500" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="allowScriptAccess" value="never"><param name="movie" value="'+videoUrl+'"/><param name="allowFullScreen" value="true"><param name="autostart" value="true"><param name="flashvars" value="MMplayerType=ActiveXn&reservelt=false&showplayinglogo=false"/><embed src="'+videoUrl+'" width="790" height="500" autostart="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" allowscriptaccess="never"/></object>';$(this).parents(".sf-noPadding").html(html)});$(".sf-shiparea a").click(function(){var videoUrl=$("#videoUrl").attr("videourl");var width=$("#videoUrl").attr("width")||790;var height=$("#videoUrl").attr("height")||500;var html='<object width="'+width+'" height="'+height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="allowScriptAccess" value="never"><param name="movie" value="'+videoUrl+'"/><param name="allowFullScreen" value="true"><param name="autostart" value="true"><param name="flashvars" value="MMplayerType=ActiveXn&reservelt=false&showplayinglogo=false"/><embed src="'+videoUrl+'" width="'+width+'" height="'+height+'" autostart="true" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" allowscriptaccess="never"/></object>';if($("#videoUrl").find("object").length==0){$("#videoUrl").append(html)}})};function html_encode(str){var s="";if(str.length==0){return""}s=str.replace(/&/g,"&gt;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");s=s.replace(/ /g,"&nbsp;");s=s.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&quot;");s=s.replace(/\n/g,"<br>");return s}var effectContainer={flower:function(){var snowflakeURl=["http://resource.sop.suning.cn/resource/sfs/project/default/o_1.png","http://resource.sop.suning.cn/resource/sfs/project/default/o_2.png","http://resource.sop.suning.cn/resource/sfs/project/default/o_3.png","http://resource.sop.suning.cn/resource/sfs/project/default/o_4.png","http://resource.sop.suning.cn/resource/sfs/project/default/o_5.png","http://resource.sop.suning.cn/resource/sfs/project/default/o_6.png"];var container=$("#content");visualWidth=container.width();visualHeight=container.height();function snowflake(){var flakeContainer=$("#snowflake");function getImagesName(){return snowflakeURl[[Math.floor(Math.random()*6)]]}function createSnowBox(){var url=getImagesName();return $('<div class="snowbox" />').css({width:41,height:41,position:"absolute",backgroundSize:"cover",zIndex:100000,top:"-41px",backgroundImage:"url("+url+")"}).addClass("snowRoll")}setInterval(function(){var startPositionLeft=Math.random()*visualWidth-100,startOpacity=1,endPositionTop=visualHeight-40,endPositionLeft=startPositionLeft-100+Math.random()*500,duration=visualHeight*10+Math.random()*5000;var randomStart=Math.random();randomStart=randomStart<0.5?startOpacity:randomStart;var flake=createSnowBox();flake.css({left:startPositionLeft,opacity:randomStart});flakeContainer.append(flake);flake.transition({top:endPositionTop,left:endPositionLeft,opacity:0.7},duration,"ease-out",function(){$(this).remove()})},200)}snowflake()},fireworks:function(){$("body").append("<canvas id='cas' width='100%' height='100%'></canvas>");var firecworkscanvas=document.getElementById("cas");var ctx=firecworkscanvas.getContext("2d");firecworkscanvas.width=window.innerWidth;firecworkscanvas.height=window.innerHeight;var bigbooms=[];function initAnimate(){drawBg();lastTime=new Date();animate()}var lastTime;function animate(){ctx.save();ctx.globalCompositeOperation="destination-out";ctx.globalAlpha=0.1;ctx.fillRect(0,0,firecworkscanvas.width,firecworkscanvas.height);ctx.restore();var newTime=new Date();if(newTime-lastTime>800+(window.innerHeight-767)/2){var random=Math.random()*100>2?true:false;var x=getRandom(firecworkscanvas.width/5,firecworkscanvas.width*4/5);var y=getRandom(50,200);if(random){var bigboom=new Boom(getRandom(firecworkscanvas.width/3,firecworkscanvas.width*2/3),2,"#FFF",{x:x,y:y});bigbooms.push(bigboom)}else{var bigboom=new Boom(getRandom(firecworkscanvas.width/3,firecworkscanvas.width*2/3),2,"#FFF",{x:firecworkscanvas.width/2,y:200},document.querySelectorAll(".shape")[parseInt(getRandom(0,document.querySelectorAll(".shape").length))]);bigbooms.push(bigboom)}lastTime=newTime}stars.foreach(function(){this.paint()});bigbooms.foreach(function(index){var that=this;if(!this.dead){this._move();this._drawLight()}else{this.booms.foreach(function(index){if(!this.dead){this.moveTo(index)}else{if(index===that.booms.length-1){bigbooms.splice(bigbooms.indexOf(that),1)}}})}});raf(animate)}Array.prototype.foreach=function(callback){for(var i=0;i<this.length;i++){if(this[i]!==null){callback.apply(this[i],[i])}}};var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){uid4=window.setTimeout(callback,1000/60)};firecworkscanvas.onclick=function(){var x=event.clientX;var y=event.clientY;var bigboom=new Boom(getRandom(firecworkscanvas.width/3,firecworkscanvas.width*2/3),2,"#FFF",{x:x,y:y});bigbooms.push(bigboom)};var Boom=function(x,r,c,boomArea){this.booms=[];this.x=x;this.y=(firecworkscanvas.height+r);this.r=r;this.c=c;this.boomArea=boomArea;this.theta=0;this.dead=false;this.ba=parseInt(getRandom(80,200));var audio=document.getElementsByTagName("audio");for(var i=0;i<audio.length;i++){if(audio[i].src.indexOf("shotfire")>=0&&(audio[i].paused||audio[i].ended)){audio[i].play();break}}};Boom.prototype={_paint:function(){ctx.save();ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,2*Math.PI);ctx.fillStyle=this.c;ctx.fill();ctx.restore()},_move:function(){var dx=this.boomArea.x-this.x,dy=this.boomArea.y-this.y;this.x=this.x+dx*0.01;this.y=this.y+dy*0.01;if(Math.abs(dx)<=this.ba&&Math.abs(dy)<=this.ba){if(this.shape){this._shapBoom()}else{this._boom()}this.dead=true}else{this._paint()}},_drawLight:function(){ctx.save();ctx.fillStyle="rgba(255,228,150,0.3)";ctx.beginPath();ctx.arc(this.x,this.y,this.r+3*Math.random()+1,0,2*Math.PI);ctx.fill();ctx.restore()},_boom:function(){var fragNum=getRandom(100,300);var style=getRandom(0,10)>=5?1:2;var color;if(style===1){color={a:parseInt(getRandom(128,255)),b:parseInt(getRandom(128,255)),c:parseInt(getRandom(128,255))}}var fanwei=fragNum;for(var i=0;i<fragNum;i++){if(style===2){color={a:parseInt(getRandom(128,255)),b:parseInt(getRandom(128,255)),c:parseInt(getRandom(128,255))}}var a=getRandom(-Math.PI,Math.PI);var x=getRandom(0,fanwei)*Math.cos(a)+this.x;var y=getRandom(0,fanwei)*Math.sin(a)+this.y;var radius=getRandom(0,2);var frag=new Frag(this.x,this.y,radius,color,x,y);this.booms.push(frag)}},_shapBoom:function(){var that=this;putValue(ocas,octx,this.shape,5,function(dots){var dx=firecworkscanvas.width/2-that.x;var dy=firecworkscanvas.height/2-that.y;for(var i=0;i<dots.length;i++){color={a:dots[i].a,b:dots[i].b,c:dots[i].c};var x=dots[i].x;var y=dots[i].y;var radius=1;var frag=new Frag(that.x,that.y,radius,color,x-dx,y-dy);that.booms.push(frag)}})}};function putValue(firecworkscanvas,context,ele,dr,callback){context.clearRect(0,0,firecworkscanvas.width,firecworkscanvas.height);var img=new Image();if(ele.innerHTML.indexOf("img")>=0){img.src=ele.getElementsByTagName("img")[0].src;imgload(img,function(){context.drawImage(img,firecworkscanvas.width/2-img.width/2,firecworkscanvas.height/2-img.width/2);dots=getimgData(firecworkscanvas,context,dr);callback(dots)})}else{var text=ele.innerHTML;context.save();var fontSize=200;context.font=fontSize+"px 宋体 bold";context.textAlign="center";context.textBaseline="middle";context.fillStyle="rgba("+parseInt(getRandom(128,255))+","+parseInt(getRandom(128,255))+","+parseInt(getRandom(128,255))+" , 1)";context.fillText(text,firecworkscanvas.width/2,firecworkscanvas.height/2);context.restore();dots=getimgData(firecworkscanvas,context,dr);callback(dots)}}function imgload(img,callback){if(img.complete){callback.call(img)}else{img.onload=function(){callback.call(this)}}}function getimgData(firecworkscanvas,context,dr){var imgData=context.getImageData(0,0,firecworkscanvas.width,firecworkscanvas.height);context.clearRect(0,0,firecworkscanvas.width,firecworkscanvas.height);var dots=[];for(var x=0;x<imgData.width;x+=dr){for(var y=0;y<imgData.height;y+=dr){var i=(y*imgData.width+x)*4;if(imgData.data[i+3]>128){var dot={x:x,y:y,a:imgData.data[i],b:imgData.data[i+1],c:imgData.data[i+2]};dots.push(dot)}}}return dots}function getRandom(a,b){return Math.random()*(b-a)+a}var maxRadius=1,stars=[];function drawBg(){for(var i=0;i<100;i++){var r=Math.random()*maxRadius;var x=Math.random()*firecworkscanvas.width;var y=Math.random()*2*firecworkscanvas.height-firecworkscanvas.height;var star=new Star(x,y,r);stars.push(star);star.paint()}}var Star=function(x,y,r){this.x=x;this.y=y;this.r=r};Star.prototype={paint:function(){ctx.save();ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,2*Math.PI);ctx.fillStyle="rgba(255,255,255,"+this.r+")";ctx.fill();ctx.restore()}};var focallength=250;var Frag=function(centerX,centerY,radius,color,tx,ty){this.tx=tx;this.ty=ty;this.x=centerX;this.y=centerY;this.dead=false;this.centerX=centerX;this.centerY=centerY;this.radius=radius;this.color=color};Frag.prototype={paint:function(){ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,2*Math.PI);ctx.fillStyle="rgba("+this.color.a+","+this.color.b+","+this.color.c+",1)";ctx.fillRect(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},moveTo:function(index){this.ty=this.ty+0.3;var dx=this.tx-this.x,dy=this.ty-this.y;this.x=Math.abs(dx)<0.1?this.tx:(this.x+dx*0.1);this.y=Math.abs(dy)<0.1?this.ty:(this.y+dy*0.1);if(dx===0&&Math.abs(dy)<=80){this.dead=true}this.paint()}};initAnimate()},snow:function(){var $flake=$('<div class="snowboxwrap" />').css({position:"absolute",top:"-50px",zIndex:"10000"}).html("&#10052;"),documentHeight=$(document).height(),documentWidth=$(document).width(),defaults={minSize:10,maxSize:50,newOn:1000,flakeColor:"#FFFFFF"},options=$.extend({},defaults,options);snowinterval=setInterval(function(){var startPositionLeft=Math.random()*documentWidth-100,startOpacity=0.5+Math.random(),sizeFlake=options.minSize+Math.random()*options.maxSize,endPositionTop=documentHeight-40,endPositionLeft=startPositionLeft-100+Math.random()*500,durationFall=documentHeight*10+Math.random()*5000;$flake.clone().appendTo("body").css({left:startPositionLeft,"font-size":sizeFlake,color:options.flakeColor}).animate({top:endPositionTop,left:endPositionLeft,opacity:0.2},durationFall,"linear",function(){$(this).remove()})},options.newOn)},stars:function(){for(var i=0;i<=150;i++){var size=Math.random()*7;var color="#fff";$("#starsBox").prepend('<span style=" width: '+size+"px; height: "+size+"px; top: "+Math.random()*100+"%; left: "+Math.random()*100+"%; background: "+color+'; box-shadow: 0 0 4px 1px #134695,0 0 4px 1px #134695 inset"></span>')}setTimeout(function(){$("#starsBox span").each(function(){$(this).css("top",Math.random()*100+"%").css("left",Math.random()*100+"%")})},1);setInterval(function(){$("#starsBox span").each(function(){$(this).css("top",Math.random()*100+"%").css("left",Math.random()*100+"%")})},100000)}};var fullEffect=function(){if($(".sf-sortbox").attr("effectShow")){var effectType=$(".sf-sortbox").attr("effectShow");switch(effectType){case"0":$(document.body).append('<div id="content"><div id="snowflake"></div></div>');effectContainer.flower();break;case"1":effectContainer.fireworks();break;case"2":effectContainer.snow();break;case"3":$(document.body).append('<div id="starsBox"></div>');effectContainer.stars();break;default:break}}};return{toggleMenu:toggleMenu,textShow:textShow,focusImage:focusImage,category:category,floorRank:floorRank,JPlaceHolder:JPlaceHolder,searchSlide:searchSlide,simulateSelect:simulateSelect,slideMore:slideMore,videoPlay:videoPlay,fullEffect:fullEffect}})(jQuery);$(function(){STORE.fit.focusImage();STORE.fit.category();STORE.fit.floorRank();STORE.fit.JPlaceHolder.init();STORE.fit.searchSlide();STORE.fit.toggleMenu();STORE.fit.slideMore();STORE.fit.videoPlay();STORE.fit.fullEffect()});